{
  "run_id": "fullstack_generation-61b17371",
  "workflow_name": "fullstack_generation",
  "status": "success",
  "success_rate": 85.71428571428571,
  "total_duration_ms": 71652.88200000001,
  "total_retries": 0,
  "step_count": 7,
  "failed_step_count": 0,
  "start_time": "2026-02-13T12:36:15.589338+00:00",
  "end_time": "2026-02-13T12:37:27.242220+00:00",
  "dataset": null,
  "inputs": {
    "feature_spec": "Agentic Workflow Evaluation: Full\u2011Stack Application Build Prompt Scenario: You are an autonomous multi\u2011agent system responsible for designing, implementing, validating, and delivering a full\u2011stack software product called EventSphere Pro, a next\u2011generation local\u2011events engagement platform. Your job is to plan, coordinate, write code, troubleshoot, test, and produce a runnable system end\u2011to\u2011end.  1. High\u2011Level Application Description EventSphere Pro is a full\u2011stack web application that enables users, organizations, and local businesses to discover, create, manage, and promote real\u2011world events. It must support rich data interactions, geolocation, real\u2011time updates, and event lifecycle management. The system should incorporate multi\u2011step processes, such as user onboarding, event publishing workflows, notifications, and analytics generation. The purpose of this specification is to evaluate the agent\u2019s ability to autonomously complete a realistic software project from concept to deployment.  2. Expanded Business Requirements 2.1 Business Objectives  Provide a scalable platform for local events discovery. Enable organizers to manage event logistics, attendees, and promotions. Support communication and timely updates to participants. Allow businesses to host recurring experiences and track performance over time. Support future monetization features (promotional boosts, ticketing, vendor dashboards).  2.2 Target User Roles   Visitors  Browse events without an account (limited features).    Registered Users  Maintain profile RSVP to events Follow organizers Receive notifications    Event Organizers  Create/edit/publish events Manage attendee lists Send updates or announcements View analytics    Business Accounts  Manage multiple event series Access advanced analytics Manage promotional campaigns    Platform Admins  Moderate content Approve/flag events Access all analytics dashboards     3. Expanded Functional Requirements 3.1 Authentication & Authorization  JWT\u2011based auth Tiered roles: user, organizer, business, admin OAuth integration optional Password reset flow  3.2 User Profile System  Avatar upload with validations Event history + RSVP history Privacy settings Ability to follow/unfollow event creators  3.3 Event Lifecycle  Draft \u2192 Review \u2192 Published \u2192 Completed \u2192 Archived Required fields:  title description start & end date/time location (address + geocoordinates) ticket info (if applicable) images   Event capacity, waitlist logic Recurring event support (weekly/monthly patterns) Moderation workflow (admins must approve flagged events)  3.4 Search & Discovery  Keyword search Filters: category, date, price, capacity, distance Map\u2011based discovery using geospatial queries Personalized recommendation feed  3.5 RSVP System  Add/Remove RSVP Waitlist auto\u2011promotion Organizer approval for restricted events Event status updates visible on user dashboard  3.6 Real\u2011Time Notifications  Event updated/cancelled RSVPs confirmed or promoted from waitlist Reminders (24h, 2h before event) Delivered via:  In-app Email (sendgrid-like abstraction) (Optional) SMS gateway    3.7 Messaging & Announcements  Organizers send targeted updates to attendees Threaded discussions for each event  3.8 Analytics Dashboards  Event performance: views, RSVPs, turnout rate Organizer dashboard: growth over time Admin dashboard: platform-wide statistics  3.9 Non\u2011Functional Requirements  High scalability (event browsing is high\u2011read) API must support pagination Robust error handling Logging & audit trail Accessibility WCAG 2.1 AA Responsive frontend   4. Technical Requirements 4.1 Frontend  Preferably Next.js (or React/Vue with justification) Fully responsive Local state + global state model (Redux/Zustand/etc.) API integration with typed interfaces File upload components Map component with real geocoding provider  4.2 Backend  Node.js + Express OR FastAPI (choice must be reasoned) REST API with OpenAPI spec Modular service architecture Email delivery abstraction Geo\u2011search support (PostGIS or equivalent)  4.3 Database  PostgreSQL schema covering:  Users Events RSVPs Notifications Follows EventFiles ModerationQueue   All schema must include timestamps, indexing, and foreign keys Include migration scripts  4.4 Testing  Unit tests for backend endpoints Integration tests for RSVP logic Frontend component tests Mocked end\u2011to\u2011end test simulating user \u2192 event lifecycle  4.5 Deployment Requirements  Dockerized environment docker-compose for local dev (frontend + backend + DB) Production build instructions (containerized) Environment variable samples and instructions   5. Agentic Workflow Requirements The system being evaluated must perform: 5.1 Planning  Break down the project into actionable subtasks Identify dependencies Generate a timeline or sequencing plan  5.2 Tool Use & Execution  Call external tools (e.g., code execution, file writes, APIs) where appropriate Handle errors and retry Validate outputs before proceeding  5.3 Multi\u2011Agent Collaboration  Assign subtasks to \u201cfrontend agent\u201d, \u201cbackend agent\u201d, \u201cDB architect\u201d, etc. Consolidate and reconcile conflicting outputs Provide a final unified solution  5.4 Verification  Run tests Simulate API calls Verify schema consistency with code Detect missing dependencies or logic gaps  5.5 Deliverables At completion, the agentic system should produce:  A runnable codebase Documentation (README + API docs) Architecture diagram Test results Deployment instructions   6. Final Instruction to the Model \u201cUsing the above requirements, autonomously plan, design, implement, validate, and deliver the full EventSphere Pro application. Use iterative reasoning, tool execution, multi-agent collaboration, and verification until a complete software product is produced.\u201d",
    "tech_stack": {
      "frontend": "react",
      "backend": "fastapi",
      "database": "postgresql"
    }
  },
  "steps": [
    {
      "step_name": "design_architecture",
      "status": "success",
      "agent_role": null,
      "tier": 3,
      "model_used": "gemini:gemini-2.5-flash",
      "duration_ms": 17726.553,
      "retry_count": 0,
      "tokens_used": 6273,
      "input": {},
      "output": {
        "raw_response": "```json\n{\n  \"api_spec\": {\n    \"openapi\": \"3.0.0\",\n    \"info\": {\n      \"title\": \"EventSphere Pro API\",\n      \"version\": \"1.0.0\",\n      \"description\": \"API for EventSphere Pro, a next-generation local-events engagement platform.\"\n    },\n    \"servers\": [\n      {\n        \"url\": \"/api/v1\",\n        \"description\": \"Base API URL\"\n      }\n    ],\n    \"components\": {\n      \"securitySchemes\": {\n        \"BearerAuth\": {\n          \"type\": \"http\",\n          \"scheme\": \"bearer\",\n          \"bearerFormat\": \"JWT\",\n          \"description"
      },
      "error": null,
      "error_type": null,
      "start_time": "2026-02-13T12:36:15.589475+00:00",
      "end_time": "2026-02-13T12:36:33.316028+00:00",
      "metadata": null
    },
    {
      "step_name": "generate_migrations",
      "status": "success",
      "agent_role": null,
      "tier": 1,
      "model_used": "gemini:gemini-2.0-flash-lite",
      "duration_ms": 9024.682999999999,
      "retry_count": 0,
      "tokens_used": 6199,
      "input": {},
      "output": {
        "migrations": [
          {
            "name": "0001_create_users_table.sql",
            "content": "-- CreateTable\nCREATE TABLE users (\n    id SERIAL PRIMARY KEY,\n    username VARCHAR(255) NOT NULL UNIQUE,\n    email VARCHAR(255) NOT NULL UNIQUE,\n    hashed_password VARCHAR(255) NOT NULL,\n    first_name VARCHAR(255),\n    last_name VARCHAR(255),\n    profile_picture_url VARCHAR(255),\n    bio TEXT,\n    is_active BOOLEAN NOT NULL DEFAULT true,\n    role VARCHAR(50) NOT NULL DEFAULT 'user', -- user, organizer, business, admin\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP\n);\n\nCREATE INDEX idx_users_email ON users (email);\nCREATE INDEX idx_users_username ON users (username);\n"
          },
          {
            "name": "0002_create_events_table.sql",
            "content": "-- CreateTable\nCREATE TABLE events (\n    id SERIAL PRIMARY KEY,\n    organizer_id INTEGER NOT NULL REFERENCES users(id),\n    title VARCHAR(255) NOT NULL,\n    description TEXT,\n    start_datetime TIMESTAMP WITH TIME ZONE NOT NULL,\n    end_datetime TIMESTAMP WITH TIME ZONE NOT NULL,\n    location_address VARCHAR(255) NOT NULL,\n    location_latitude NUMERIC(10, 6) NOT NULL,\n    location_longitude NUMERIC(10, 6) NOT NULL,\n    ticket_price NUMERIC(10, 2),\n    capacity INTEGER,\n    is_free BOOLEAN NOT NULL DEFAULT false,\n    is_published BOOLEAN NOT NULL DEFAULT false,\n    status VARCHAR(50) NOT NULL DEFAULT 'draft', -- draft, review, published, completed, archived\n    category VARCHAR(100),\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,\n    FOREIGN KEY (organizer_id) REFERENCES users(id)\n);\n\nCREATE INDEX idx_events_organizer_id ON events (organizer_id);\nCREATE INDEX idx_events_start_datetime ON events (start_datetime);\nCREATE INDEX idx_events_location ON events (location_latitude, location_longitude);\nCREATE INDEX idx_events_status ON events (status);\n"
          },
          {
            "name": "0003_create_rsvps_table.sql",
            "content": "-- CreateTable\nCREATE TABLE rsvps (\n    user_id INTEGER NOT NULL REFERENCES users(id),\n    event_id INTEGER NOT NULL REFERENCES events(id),\n    status VARCHAR(50) NOT NULL DEFAULT 'pending', -- pending, confirmed, cancelled, waitlisted\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,\n    PRIMARY KEY (user_id, event_id),\n    FOREIGN KEY (user_id) REFERENCES users(id),\n    FOREIGN KEY (event_id) REFERENCES events(id)\n);\n\nCREATE INDEX idx_rsvps_event_id ON rsvps (event_id);\nCREATE INDEX idx_rsvps_user_id ON rsvps (user_id);\n"
          },
          {
            "name": "0004_create_notifications_table.sql",
            "content": "-- CreateTable\nCREATE TABLE notifications (\n    id SERIAL PRIMARY KEY,\n    user_id INTEGER NOT NULL REFERENCES users(id),\n    event_id INTEGER REFERENCES events(id),\n    type VARCHAR(50) NOT NULL, -- event_update, rsvp_confirmed, reminder\n    content TEXT,\n    is_read BOOLEAN NOT NULL DEFAULT false,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,\n    FOREIGN KEY (user_id) REFERENCES users(id),\n    FOREIGN KEY (event_id) REFERENCES events(id)\n);\n\nCREATE INDEX idx_notifications_user_id ON notifications (user_id);\nCREATE INDEX idx_notifications_event_id ON notifications (event_id);\n"
          },
          {
            "name": "0005_create_follows_table.sql",
            "content": "-- CreateTable\nCREATE TABLE follows (\n    follower_id INTEGER NOT NULL REFERENCES users(id),\n    followed_id INTEGER NOT NULL REFERENCES users(id),\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,\n    PRIMARY KEY (follower_id, followed_id),\n    FOREIGN KEY (follower_id) REFERENCES users(id),\n    FOREIGN KEY (followed_id) REFERENCES users(id)\n);\n\nCREATE INDEX idx_follows_follower_id ON follows (follower_id);\nCREATE INDEX idx_follows_followed_id ON follows (followed_id);\n"
          },
          {
            "name": "0006_create_event_files_table.sql",
            "content": "-- CreateTable\nCREATE TABLE event_files (\n    id SERIAL PRIMARY KEY,\n    event_id INTEGER NOT NULL REFERENCES events(id),\n    file_url VARCHAR(255) NOT NULL,\n    file_type VARCHAR(50),\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,\n    FOREIGN KEY (event_id) REFERENCES events(id)\n);\n\nCREATE INDEX idx_event_files_event_id ON event_files (event_id);\n"
          },
          {
            "name": "0007_create_moderation_queue_table.sql",
            "content": "-- CreateTable\nCREATE TABLE moderation_queue (\n    id SERIAL PRIMARY KEY,\n    event_id INTEGER NOT NULL REFERENCES events(id),\n    reason TEXT,\n    status VARCHAR(50) NOT NULL DEFAULT 'pending', -- pending, approved, rejected\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,\n    FOREIGN KEY (event_id) REFERENCES events(id)\n);\n\nCREATE INDEX idx_moderation_queue_event_id ON moderation_queue (event_id);\n"
          },
          {
            "name": "0008_add_unique_constraints_to_users_and_events.sql",
            "content": "ALTER TABLE users ADD CONSTRAINT unique_email UNIQUE (email);\nALTER TABLE users ADD CONSTRAINT unique_username UNIQUE (username);\n"
          },
          {
            "name": "0009_add_index_to_event_title.sql",
            "content": "CREATE INDEX idx_events_title ON events (title);"
          }
        ]
      },
      "error": null,
      "error_type": null,
      "start_time": "2026-02-13T12:36:33.316550+00:00",
      "end_time": "2026-02-13T12:36:42.341233+00:00",
      "metadata": null
    },
    {
      "step_name": "generate_frontend",
      "status": "success",
      "agent_role": null,
      "tier": 2,
      "model_used": "gemini:gemini-2.0-flash",
      "duration_ms": 11631.36,
      "retry_count": 0,
      "tokens_used": 6331,
      "input": {},
      "output": {
        "ui_code": {
          "components": [
            {
              "name": "EventCard",
              "description": "Displays a summary of an event.",
              "props": [
                "event: Event object",
                "onClick: Function to handle card click"
              ],
              "code": "import React from 'react';\n\nconst EventCard = ({ event, onClick }) => {\n  return (\n    <div className=\"event-card\" onClick={onClick}>\n      <h3>{event.title}</h3>\n      <p>{event.description}</p>\n      <p>Date: {event.start_date}</p>\n      <p>Location: {event.location}</p>\n    </div>\n  );\n};\n\nexport default EventCard;"
            },
            {
              "name": "EventList",
              "description": "Displays a list of EventCard components.",
              "props": [
                "events: Array of Event objects"
              ],
              "code": "import React from 'react';\nimport EventCard from './EventCard';\n\nconst EventList = ({ events }) => {\n  return (\n    <div className=\"event-list\">\n      {events.map((event) => (\n        <EventCard key={event.id} event={event} />\n      ))}\n    </div>\n  );\n};\n\nexport default EventList;"
            },
            {
              "name": "SearchBar",
              "description": "Component for searching events.",
              "props": [
                "onSearch: Function to handle search input"
              ],
              "code": "import React, { useState } from 'react';\n\nconst SearchBar = ({ onSearch }) => {\n  const [searchTerm, setSearchTerm] = useState('');\n\n  const handleChange = (event) => {\n    setSearchTerm(event.target.value);\n    onSearch(event.target.value);\n  };\n\n  return (\n    <input\n      type=\"text\"\n      placeholder=\"Search events...\"\n      value={searchTerm}\n      onChange={handleChange}\n    />\n  );\n};\n\nexport default SearchBar;"
            },
            {
              "name": "FilterBar",
              "description": "Component for filtering events by category, date, etc.",
              "props": [
                "onFilter: Function to handle filter changes"
              ],
              "code": "import React from 'react';\n\nconst FilterBar = ({ onFilter }) => {\n  const handleCategoryChange = (event) => {\n    onFilter({ category: event.target.value });\n  };\n\n  return (\n    <div className=\"filter-bar\">\n      <select onChange={handleCategoryChange}>\n        <option value=\"\">All Categories</option>\n        <option value=\"music\">Music</option>\n        <option value=\"sports\">Sports</option>\n        <option value=\"arts\">Arts</option>\n      </select>\n    </div>\n  );\n};\n\nexport default FilterBar;"
            },
            {
              "name": "MapComponent",
              "description": "Component for displaying events on a map. Requires a mapping library integration (e.g., Google Maps, Leaflet).",
              "props": [
                "events: Array of Event objects"
              ],
              "code": "// Placeholder: Implement map integration here (e.g., using Google Maps API)\nimport React from 'react';\n\nconst MapComponent = ({ events }) => {\n  return (\n    <div className=\"map-container\">\n      {/* Map implementation goes here */}\n      <p>Map will display event locations.</p>\n    </div>\n  );\n};\n\nexport default MapComponent;"
            },
            {
              "name": "EventDetails",
              "description": "Displays detailed information about a single event.",
              "props": [
                "event: Event object"
              ],
              "code": "import React from 'react';\n\nconst EventDetails = ({ event }) => {\n  return (\n    <div className=\"event-details\">\n      <h2>{event.title}</h2>\n      <p>{event.description}</p>\n      <p>Date: {event.start_date}</p>\n      <p>Location: {event.location}</p>\n      <p>Capacity: {event.capacity}</p>\n      {/* Add RSVP button and other details */}\n    </div>\n  );\n};\n\nexport default EventDetails;"
            }
          ]
        },
        "ui_tests": {
          "components": [
            {
              "name": "EventCard",
              "tests": [
                "Renders event title",
                "Renders event description",
                "Renders event date",
                "Renders event location",
                "Calls onClick handler when clicked"
              ],
              "code": "import React from 'react';\nimport { render, screen, fireEvent } from '@testing-library/react';\nimport EventCard from './EventCard';\n\ndescribe('EventCard Component', () => {\n  const event = {\n    id: 1,\n    title: 'Test Event',\n    description: 'Test Description',\n    start_date: '2024-01-01',\n    location: 'Test Location',\n  };\n\n  const onClick = jest.fn();\n\n  it('Renders event title', () => {\n    render(<EventCard event={event} onClick={onClick} />);\n    expect(screen.getByText('Test Event')).toBeInTheDocument();\n  });\n\n  it('Renders event description', () => {\n    render(<EventCard event={event} onClick={onClick} />);\n    expect(screen.getByText('Test Description')).toBeInTheDocument();\n  });\n\n  it('Calls onClick handler when clicked', () => {\n    render(<EventCard event={event} onClick={onClick} />);\n    fireEvent.click(screen.getByText('Test Event').closest('.event-card'));\n    expect(onClick).toHaveBeenCalled();\n  });\n});"
            },
            {
              "name": "SearchBar",
              "tests": [
                "Updates search term on input change",
                "Calls onSearch handler with search term"
              ],
              "code": "import React from 'react';\nimport { render, screen, fireEvent } from '@testing-library/react';\nimport SearchBar from './SearchBar';\n\ndescribe('SearchBar Component', () => {\n  const onSearch = jest.fn();\n\n  it('Updates search term on input change', () => {\n    render(<SearchBar onSearch={onSearch} />);\n    const inputElement = screen.getByPlaceholderText('Search events...');\n    fireEvent.change(inputElement, { target: { value: 'test' } });\n    expect(inputElement.value).toBe('test');\n  });\n\n  it('Calls onSearch handler with search term', () => {\n    render(<SearchBar onSearch={onSearch} />);\n    const inputElement = screen.getByPlaceholderText('Search events...');\n    fireEvent.change(inputElement, { target: { value: 'test' } });\n    expect(onSearch).toHaveBeenCalledWith('test');\n  });\n});"
            }
          ]
        }
      },
      "error": null,
      "error_type": null,
      "start_time": "2026-02-13T12:36:33.316496+00:00",
      "end_time": "2026-02-13T12:36:44.947856+00:00",
      "metadata": null
    },
    {
      "step_name": "generate_api",
      "status": "success",
      "agent_role": null,
      "tier": 2,
      "model_used": "gemini:gemini-2.0-flash",
      "duration_ms": 25505.674,
      "retry_count": 0,
      "tokens_used": 7970,
      "input": {},
      "output": {
        "api_code": {
          "user_endpoints": [
            {
              "path": "/users",
              "method": "POST",
              "description": "Register a new user",
              "request_body": {
                "username": "string",
                "email": "string",
                "password": "string"
              },
              "response_code": 201,
              "response_body": {
                "user_id": "integer",
                "username": "string",
                "email": "string"
              }
            },
            {
              "path": "/users/login",
              "method": "POST",
              "description": "Login a user",
              "request_body": {
                "username": "string",
                "password": "string"
              },
              "response_code": 200,
              "response_body": {
                "access_token": "string",
                "token_type": "string"
              }
            },
            {
              "path": "/users/me",
              "method": "GET",
              "description": "Get current user profile",
              "security": "BearerAuth",
              "response_code": 200,
              "response_body": {
                "user_id": "integer",
                "username": "string",
                "email": "string",
                "avatar_url": "string",
                "event_history": "array",
                "rsvp_history": "array",
                "privacy_settings": "object"
              }
            },
            {
              "path": "/users/me",
              "method": "PUT",
              "description": "Update current user profile",
              "security": "BearerAuth",
              "request_body": {
                "username": "string",
                "email": "string",
                "avatar_url": "string",
                "privacy_settings": "object"
              },
              "response_code": 200,
              "response_body": {
                "user_id": "integer",
                "username": "string",
                "email": "string",
                "avatar_url": "string",
                "event_history": "array",
                "rsvp_history": "array",
                "privacy_settings": "object"
              }
            }
          ],
          "event_endpoints": [
            {
              "path": "/events",
              "method": "POST",
              "description": "Create a new event",
              "security": "BearerAuth",
              "request_body": {
                "title": "string",
                "description": "string",
                "start_time": "datetime",
                "end_time": "datetime",
                "location_address": "string",
                "location_geocoordinates": "string",
                "ticket_info": "string",
                "images": "array",
                "capacity": "integer",
                "recurring_pattern": "string",
                "status": "string"
              },
              "response_code": 201,
              "response_body": {
                "event_id": "integer",
                "title": "string",
                "description": "string"
              }
            },
            {
              "path": "/events/{event_id}",
              "method": "GET",
              "description": "Get an event by ID",
              "response_code": 200,
              "response_body": {
                "event_id": "integer",
                "title": "string",
                "description": "string",
                "start_time": "datetime",
                "end_time": "datetime",
                "location_address": "string",
                "location_geocoordinates": "string",
                "ticket_info": "string",
                "images": "array",
                "capacity": "integer",
                "recurring_pattern": "string",
                "status": "string"
              }
            },
            {
              "path": "/events/{event_id}",
              "method": "PUT",
              "description": "Update an event by ID",
              "security": "BearerAuth",
              "request_body": {
                "title": "string",
                "description": "string",
                "start_time": "datetime",
                "end_time": "datetime",
                "location_address": "string",
                "location_geocoordinates": "string",
                "ticket_info": "string",
                "images": "array",
                "capacity": "integer",
                "recurring_pattern": "string",
                "status": "string"
              },
              "response_code": 200,
              "response_body": {
                "event_id": "integer",
                "title": "string",
                "description": "string"
              }
            },
            {
              "path": "/events/{event_id}",
              "method": "DELETE",
              "description": "Delete an event by ID",
              "security": "BearerAuth",
              "response_code": 204
            },
            {
              "path": "/events",
              "method": "GET",
              "description": "Search and filter events",
              "parameters": [
                {
                  "name": "keyword",
                  "in": "query",
                  "type": "string"
                },
                {
                  "name": "category",
                  "in": "query",
                  "type": "string"
                },
                {
                  "name": "date",
                  "in": "query",
                  "type": "date"
                },
                {
                  "name": "price",
                  "in": "query",
                  "type": "number"
                },
                {
                  "name": "capacity",
                  "in": "query",
                  "type": "integer"
                },
                {
                  "name": "distance",
                  "in": "query",
                  "type": "number"
                }
              ],
              "response_code": 200,
              "response_body": "array"
            }
          ],
          "rsvp_endpoints": [
            {
              "path": "/events/{event_id}/rsvp",
              "method": "POST",
              "description": "RSVP to an event",
              "security": "BearerAuth",
              "response_code": 201,
              "response_body": {
                "rsvp_id": "integer",
                "user_id": "integer",
                "event_id": "integer",
                "status": "string"
              }
            },
            {
              "path": "/events/{event_id}/rsvp",
              "method": "DELETE",
              "description": "Remove RSVP from an event",
              "security": "BearerAuth",
              "response_code": 204
            }
          ],
          "notification_endpoints": [
            {
              "path": "/notifications",
              "method": "GET",
              "description": "Get user notifications",
              "security": "BearerAuth",
              "response_code": 200,
              "response_body": "array"
            }
          ],
          "admin_endpoints": [
            {
              "path": "/admin/events/{event_id}/approve",
              "method": "POST",
              "description": "Approve a flagged event",
              "security": "BearerAuth",
              "response_code": 200
            },
            {
              "path": "/admin/analytics",
              "method": "GET",
              "description": "Get platform-wide statistics",
              "security": "BearerAuth",
              "response_code": 200,
              "response_body": "object"
            }
          ]
        },
        "api_tests": {
          "user_tests": [
            {
              "test_name": "Register a new user",
              "endpoint": "/users",
              "method": "POST",
              "request_body": {
                "username": "testuser",
                "email": "test@example.com",
                "password": "password123"
              },
              "expected_status_code": 201,
              "expected_response_body": {
                "user_id": "integer",
                "username": "testuser",
                "email": "test@example.com"
              }
            },
            {
              "test_name": "Login a user",
              "endpoint": "/users/login",
              "method": "POST",
              "request_body": {
                "username": "testuser",
                "password": "password123"
              },
              "expected_status_code": 200,
              "expected_response_body": {
                "access_token": "string",
                "token_type": "string"
              }
            },
            {
              "test_name": "Get current user profile",
              "endpoint": "/users/me",
              "method": "GET",
              "security": "BearerAuth",
              "expected_status_code": 200,
              "expected_response_body": {
                "user_id": "integer",
                "username": "testuser",
                "email": "test@example.com",
                "avatar_url": "string",
                "event_history": "array",
                "rsvp_history": "array",
                "privacy_settings": "object"
              }
            },
            {
              "test_name": "Update current user profile",
              "endpoint": "/users/me",
              "method": "PUT",
              "security": "BearerAuth",
              "request_body": {
                "username": "newuser",
                "email": "new@example.com",
                "avatar_url": "new_avatar.jpg",
                "privacy_settings": "{\"setting1\": \"value1\"}"
              },
              "expected_status_code": 200,
              "expected_response_body": {
                "user_id": "integer",
                "username": "newuser",
                "email": "new@example.com",
                "avatar_url": "new_avatar.jpg",
                "event_history": "array",
                "rsvp_history": "array",
                "privacy_settings": "object"
              }
            }
          ],
          "event_tests": [
            {
              "test_name": "Create a new event",
              "endpoint": "/events",
              "method": "POST",
              "security": "BearerAuth",
              "request_body": {
                "title": "Test Event",
                "description": "Test Description",
                "start_time": "2024-01-01T10:00:00",
                "end_time": "2024-01-01T12:00:00",
                "location_address": "123 Test St",
                "location_geocoordinates": "40.7128,-74.0060",
                "ticket_info": "Free",
                "images": [],
                "capacity": 100,
                "recurring_pattern": null,
                "status": "draft"
              },
              "expected_status_code": 201,
              "expected_response_body": {
                "event_id": "integer",
                "title": "Test Event",
                "description": "Test Description"
              }
            },
            {
              "test_name": "Get an event by ID",
              "endpoint": "/events/1",
              "method": "GET",
              "expected_status_code": 200,
              "expected_response_body": {
                "event_id": "integer",
                "title": "Test Event",
                "description": "Test Description",
                "start_time": "2024-01-01T10:00:00",
                "end_time": "2024-01-01T12:00:00",
                "location_address": "123 Test St",
                "location_geocoordinates": "40.7128,-74.0060",
                "ticket_info": "Free",
                "images": [],
                "capacity": 100,
                "recurring_pattern": null,
                "status": "draft"
              }
            },
            {
              "test_name": "Update an event by ID",
              "endpoint": "/events/1",
              "method": "PUT",
              "security": "BearerAuth",
              "request_body": {
                "title": "Updated Event",
                "description": "Updated Description",
                "start_time": "2024-01-02T10:00:00",
                "end_time": "2024-01-02T12:00:00",
                "location_address": "456 Updated St",
                "location_geocoordinates": "34.0522,-118.2437",
                "ticket_info": "Paid",
                "images": [],
                "capacity": 50,
                "recurring_pattern": null,
                "status": "published"
              },
              "expected_status_code": 200,
              "expected_response_body": {
                "event_id": "integer",
                "title": "Updated Event",
                "description": "Updated Description"
              }
            },
            {
              "test_name": "Delete an event by ID",
              "endpoint": "/events/1",
              "method": "DELETE",
              "security": "BearerAuth",
              "expected_status_code": 204
            },
            {
              "test_name": "Search and filter events",
              "endpoint": "/events?keyword=Test&category=Music&date=2024-01-01&price=10&capacity=50&distance=100",
              "method": "GET",
              "expected_status_code": 200,
              "expected_response_body": "array"
            }
          ],
          "rsvp_tests": [
            {
              "test_name": "RSVP to an event",
              "endpoint": "/events/1/rsvp",
              "method": "POST",
              "security": "BearerAuth",
              "expected_status_code": 201,
              "expected_response_body": {
                "rsvp_id": "integer",
                "user_id": "integer",
                "event_id": "integer",
                "status": "string"
              }
            },
            {
              "test_name": "Remove RSVP from an event",
              "endpoint": "/events/1/rsvp",
              "method": "DELETE",
              "security": "BearerAuth",
              "expected_status_code": 204
            }
          ],
          "notification_tests": [
            {
              "test_name": "Get user notifications",
              "endpoint": "/notifications",
              "method": "GET",
              "security": "BearerAuth",
              "expected_status_code": 200,
              "expected_response_body": "array"
            }
          ],
          "admin_tests": [
            {
              "test_name": "Approve a flagged event",
              "endpoint": "/admin/events/1/approve",
              "method": "POST",
              "security": "BearerAuth",
              "expected_status_code": 200
            },
            {
              "test_name": "Get platform-wide statistics",
              "endpoint": "/admin/analytics",
              "method": "GET",
              "security": "BearerAuth",
              "expected_status_code": 200,
              "expected_response_body": "object"
            }
          ]
        }
      },
      "error": null,
      "error_type": null,
      "start_time": "2026-02-13T12:36:33.316402+00:00",
      "end_time": "2026-02-13T12:36:58.822076+00:00",
      "metadata": null
    },
    {
      "step_name": "generate_integration_tests",
      "status": "success",
      "agent_role": null,
      "tier": 2,
      "model_used": "gemini:gemini-2.0-flash",
      "duration_ms": 10610.273,
      "retry_count": 0,
      "tokens_used": 19112,
      "input": {},
      "output": {
        "integration_tests": [
          {
            "name": "User Registration and Login Flow",
            "description": "Tests the complete user registration and login flow.",
            "steps": [
              {
                "step": 1,
                "description": "Register a new user via the /users endpoint.",
                "endpoint": "/users",
                "method": "POST",
                "request_body": {
                  "username": "integration_test_user",
                  "email": "integration_test@example.com",
                  "password": "integration_test_password"
                },
                "expected_status_code": 201,
                "expected_response_body": {
                  "user_id": "integer",
                  "username": "integration_test_user",
                  "email": "integration_test@example.com"
                }
              },
              {
                "step": 2,
                "description": "Login the newly registered user via the /users/login endpoint.",
                "endpoint": "/users/login",
                "method": "POST",
                "request_body": {
                  "username": "integration_test_user",
                  "password": "integration_test_password"
                },
                "expected_status_code": 200,
                "expected_response_body": {
                  "access_token": "string",
                  "token_type": "string"
                },
                "store_token": true
              },
              {
                "step": 3,
                "description": "Get the current user profile using the /users/me endpoint with the obtained token.",
                "endpoint": "/users/me",
                "method": "GET",
                "security": "BearerAuth",
                "expected_status_code": 200,
                "expected_response_body": {
                  "user_id": "integer",
                  "username": "integration_test_user",
                  "email": "integration_test@example.com",
                  "avatar_url": "string",
                  "event_history": "array",
                  "rsvp_history": "array",
                  "privacy_settings": "object"
                },
                "use_stored_token": true
              }
            ]
          },
          {
            "name": "Event Creation and RSVP Flow",
            "description": "Tests the creation of an event by a user and another user RSVPing to it.",
            "steps": [
              {
                "step": 1,
                "description": "Register an organizer user via the /users endpoint.",
                "endpoint": "/users",
                "method": "POST",
                "request_body": {
                  "username": "organizer_user",
                  "email": "organizer@example.com",
                  "password": "organizer_password"
                },
                "expected_status_code": 201,
                "expected_response_body": {
                  "user_id": "integer",
                  "username": "organizer_user",
                  "email": "organizer@example.com"
                },
                "store_organizer_id": true
              },
              {
                "step": 2,
                "description": "Login the organizer user via the /users/login endpoint.",
                "endpoint": "/users/login",
                "method": "POST",
                "request_body": {
                  "username": "organizer_user",
                  "password": "organizer_password"
                },
                "expected_status_code": 200,
                "expected_response_body": {
                  "access_token": "string",
                  "token_type": "string"
                },
                "store_organizer_token": true
              },
              {
                "step": 3,
                "description": "Create a new event via the /events endpoint using the organizer token.",
                "endpoint": "/events",
                "method": "POST",
                "security": "BearerAuth",
                "request_body": {
                  "title": "Integration Event",
                  "description": "Integration Description",
                  "start_time": "2024-12-31T23:59:59",
                  "end_time": "2025-01-01T00:00:00",
                  "location_address": "Integration Location",
                  "location_geocoordinates": "0.0,0.0",
                  "ticket_info": "Free",
                  "images": [],
                  "capacity": 10,
                  "recurring_pattern": null,
                  "status": "published"
                },
                "expected_status_code": 201,
                "expected_response_body": {
                  "event_id": "integer",
                  "title": "Integration Event",
                  "description": "Integration Description"
                },
                "use_stored_token": "organizer_token",
                "store_event_id": true
              },
              {
                "step": 4,
                "description": "Register a new user (attendee) via the /users endpoint.",
                "endpoint": "/users",
                "method": "POST",
                "request_body": {
                  "username": "attendee_user",
                  "email": "attendee@example.com",
                  "password": "attendee_password"
                },
                "expected_status_code": 201,
                "expected_response_body": {
                  "user_id": "integer",
                  "username": "attendee_user",
                  "email": "attendee@example.com"
                },
                "store_attendee_id": true
              },
              {
                "step": 5,
                "description": "Login the attendee user via the /users/login endpoint.",
                "endpoint": "/users/login",
                "method": "POST",
                "request_body": {
                  "username": "attendee_user",
                  "password": "attendee_password"
                },
                "expected_status_code": 200,
                "expected_response_body": {
                  "access_token": "string",
                  "token_type": "string"
                },
                "store_attendee_token": true
              },
              {
                "step": 6,
                "description": "RSVP to the created event via the /events/{event_id}/rsvp endpoint using the attendee token.",
                "endpoint": "/events/{event_id}/rsvp",
                "method": "POST",
                "security": "BearerAuth",
                "expected_status_code": 201,
                "expected_response_body": {
                  "rsvp_id": "integer",
                  "user_id": "integer",
                  "event_id": "integer",
                  "status": "string"
                },
                "use_stored_token": "attendee_token",
                "path_params": {
                  "event_id": "{event_id}"
                },
                "replace_event_id": true
              }
            ]
          }
        ]
      },
      "error": null,
      "error_type": null,
      "start_time": "2026-02-13T12:36:58.822426+00:00",
      "end_time": "2026-02-13T12:37:09.432699+00:00",
      "metadata": null
    },
    {
      "step_name": "review_code",
      "status": "success",
      "agent_role": null,
      "tier": 3,
      "model_used": "gemini:gemini-2.5-flash",
      "duration_ms": 17806.702999999998,
      "retry_count": 0,
      "tokens_used": 21057,
      "input": {},
      "output": {
        "raw_response": "```json\n{\n  \"review_report\": {\n    \"overall_assessment\": \"The autonomous agent has demonstrated strong capability in planning and generating a foundational codebase for EventSphere Pro. The database schema is well-designed and covers all core entities with appropriate relationships and indexing. The backend API specification is detailed and aligns well with functional requirements, including authentication, event management, and search. Basic frontend components are provided, and the integration/E2E tests cover critical user flows. The use of FastAPI and PostgreSQL aligns with the technical stack choice.\",\n    \"database_migrations\": {\n      \"status\": \"Good\",\n      \"comments\": \"All specified tables (Users, Events, RSVPs, Notifications, Follows, EventFiles, ModerationQueue) are created with appropriate columns,"
      },
      "error": null,
      "error_type": null,
      "start_time": "2026-02-13T12:37:09.433038+00:00",
      "end_time": "2026-02-13T12:37:27.239741+00:00",
      "metadata": null
    },
    {
      "step_name": "assemble_feature",
      "status": "skipped",
      "agent_role": null,
      "tier": 1,
      "model_used": null,
      "duration_ms": null,
      "retry_count": 0,
      "tokens_used": null,
      "input": {},
      "output": {},
      "error": null,
      "error_type": null,
      "start_time": "2026-02-13T12:37:27.240086+00:00",
      "end_time": null,
      "metadata": {
        "skip_reason": "conditions not met"
      }
    }
  ],
  "final_output": {
    "feature_package": null,
    "review_report": null,
    "all_code": {
      "backend": {
        "user_endpoints": [
          {
            "path": "/users",
            "method": "POST",
            "description": "Register a new user",
            "request_body": {
              "username": "string",
              "email": "string",
              "password": "string"
            },
            "response_code": 201,
            "response_body": {
              "user_id": "integer",
              "username": "string",
              "email": "string"
            }
          },
          {
            "path": "/users/login",
            "method": "POST",
            "description": "Login a user",
            "request_body": {
              "username": "string",
              "password": "string"
            },
            "response_code": 200,
            "response_body": {
              "access_token": "string",
              "token_type": "string"
            }
          },
          {
            "path": "/users/me",
            "method": "GET",
            "description": "Get current user profile",
            "security": "BearerAuth",
            "response_code": 200,
            "response_body": {
              "user_id": "integer",
              "username": "string",
              "email": "string",
              "avatar_url": "string",
              "event_history": "array",
              "rsvp_history": "array",
              "privacy_settings": "object"
            }
          },
          {
            "path": "/users/me",
            "method": "PUT",
            "description": "Update current user profile",
            "security": "BearerAuth",
            "request_body": {
              "username": "string",
              "email": "string",
              "avatar_url": "string",
              "privacy_settings": "object"
            },
            "response_code": 200,
            "response_body": {
              "user_id": "integer",
              "username": "string",
              "email": "string",
              "avatar_url": "string",
              "event_history": "array",
              "rsvp_history": "array",
              "privacy_settings": "object"
            }
          }
        ],
        "event_endpoints": [
          {
            "path": "/events",
            "method": "POST",
            "description": "Create a new event",
            "security": "BearerAuth",
            "request_body": {
              "title": "string",
              "description": "string",
              "start_time": "datetime",
              "end_time": "datetime",
              "location_address": "string",
              "location_geocoordinates": "string",
              "ticket_info": "string",
              "images": "array",
              "capacity": "integer",
              "recurring_pattern": "string",
              "status": "string"
            },
            "response_code": 201,
            "response_body": {
              "event_id": "integer",
              "title": "string",
              "description": "string"
            }
          },
          {
            "path": "/events/{event_id}",
            "method": "GET",
            "description": "Get an event by ID",
            "response_code": 200,
            "response_body": {
              "event_id": "integer",
              "title": "string",
              "description": "string",
              "start_time": "datetime",
              "end_time": "datetime",
              "location_address": "string",
              "location_geocoordinates": "string",
              "ticket_info": "string",
              "images": "array",
              "capacity": "integer",
              "recurring_pattern": "string",
              "status": "string"
            }
          },
          {
            "path": "/events/{event_id}",
            "method": "PUT",
            "description": "Update an event by ID",
            "security": "BearerAuth",
            "request_body": {
              "title": "string",
              "description": "string",
              "start_time": "datetime",
              "end_time": "datetime",
              "location_address": "string",
              "location_geocoordinates": "string",
              "ticket_info": "string",
              "images": "array",
              "capacity": "integer",
              "recurring_pattern": "string",
              "status": "string"
            },
            "response_code": 200,
            "response_body": {
              "event_id": "integer",
              "title": "string",
              "description": "string"
            }
          },
          {
            "path": "/events/{event_id}",
            "method": "DELETE",
            "description": "Delete an event by ID",
            "security": "BearerAuth",
            "response_code": 204
          },
          {
            "path": "/events",
            "method": "GET",
            "description": "Search and filter events",
            "parameters": [
              {
                "name": "keyword",
                "in": "query",
                "type": "string"
              },
              {
                "name": "category",
                "in": "query",
                "type": "string"
              },
              {
                "name": "date",
                "in": "query",
                "type": "date"
              },
              {
                "name": "price",
                "in": "query",
                "type": "number"
              },
              {
                "name": "capacity",
                "in": "query",
                "type": "integer"
              },
              {
                "name": "distance",
                "in": "query",
                "type": "number"
              }
            ],
            "response_code": 200,
            "response_body": "array"
          }
        ],
        "rsvp_endpoints": [
          {
            "path": "/events/{event_id}/rsvp",
            "method": "POST",
            "description": "RSVP to an event",
            "security": "BearerAuth",
            "response_code": 201,
            "response_body": {
              "rsvp_id": "integer",
              "user_id": "integer",
              "event_id": "integer",
              "status": "string"
            }
          },
          {
            "path": "/events/{event_id}/rsvp",
            "method": "DELETE",
            "description": "Remove RSVP from an event",
            "security": "BearerAuth",
            "response_code": 204
          }
        ],
        "notification_endpoints": [
          {
            "path": "/notifications",
            "method": "GET",
            "description": "Get user notifications",
            "security": "BearerAuth",
            "response_code": 200,
            "response_body": "array"
          }
        ],
        "admin_endpoints": [
          {
            "path": "/admin/events/{event_id}/approve",
            "method": "POST",
            "description": "Approve a flagged event",
            "security": "BearerAuth",
            "response_code": 200
          },
          {
            "path": "/admin/analytics",
            "method": "GET",
            "description": "Get platform-wide statistics",
            "security": "BearerAuth",
            "response_code": 200,
            "response_body": "object"
          }
        ]
      },
      "frontend": {
        "components": [
          {
            "name": "EventCard",
            "description": "Displays a summary of an event.",
            "props": [
              "event: Event object",
              "onClick: Function to handle card click"
            ],
            "code": "import React from 'react';\n\nconst EventCard = ({ event, onClick }) => {\n  return (\n    <div className=\"event-card\" onClick={onClick}>\n      <h3>{event.title}</h3>\n      <p>{event.description}</p>\n      <p>Date: {event.start_date}</p>\n      <p>Location: {event.location}</p>\n    </div>\n  );\n};\n\nexport default EventCard;"
          },
          {
            "name": "EventList",
            "description": "Displays a list of EventCard components.",
            "props": [
              "events: Array of Event objects"
            ],
            "code": "import React from 'react';\nimport EventCard from './EventCard';\n\nconst EventList = ({ events }) => {\n  return (\n    <div className=\"event-list\">\n      {events.map((event) => (\n        <EventCard key={event.id} event={event} />\n      ))}\n    </div>\n  );\n};\n\nexport default EventList;"
          },
          {
            "name": "SearchBar",
            "description": "Component for searching events.",
            "props": [
              "onSearch: Function to handle search input"
            ],
            "code": "import React, { useState } from 'react';\n\nconst SearchBar = ({ onSearch }) => {\n  const [searchTerm, setSearchTerm] = useState('');\n\n  const handleChange = (event) => {\n    setSearchTerm(event.target.value);\n    onSearch(event.target.value);\n  };\n\n  return (\n    <input\n      type=\"text\"\n      placeholder=\"Search events...\"\n      value={searchTerm}\n      onChange={handleChange}\n    />\n  );\n};\n\nexport default SearchBar;"
          },
          {
            "name": "FilterBar",
            "description": "Component for filtering events by category, date, etc.",
            "props": [
              "onFilter: Function to handle filter changes"
            ],
            "code": "import React from 'react';\n\nconst FilterBar = ({ onFilter }) => {\n  const handleCategoryChange = (event) => {\n    onFilter({ category: event.target.value });\n  };\n\n  return (\n    <div className=\"filter-bar\">\n      <select onChange={handleCategoryChange}>\n        <option value=\"\">All Categories</option>\n        <option value=\"music\">Music</option>\n        <option value=\"sports\">Sports</option>\n        <option value=\"arts\">Arts</option>\n      </select>\n    </div>\n  );\n};\n\nexport default FilterBar;"
          },
          {
            "name": "MapComponent",
            "description": "Component for displaying events on a map. Requires a mapping library integration (e.g., Google Maps, Leaflet).",
            "props": [
              "events: Array of Event objects"
            ],
            "code": "// Placeholder: Implement map integration here (e.g., using Google Maps API)\nimport React from 'react';\n\nconst MapComponent = ({ events }) => {\n  return (\n    <div className=\"map-container\">\n      {/* Map implementation goes here */}\n      <p>Map will display event locations.</p>\n    </div>\n  );\n};\n\nexport default MapComponent;"
          },
          {
            "name": "EventDetails",
            "description": "Displays detailed information about a single event.",
            "props": [
              "event: Event object"
            ],
            "code": "import React from 'react';\n\nconst EventDetails = ({ event }) => {\n  return (\n    <div className=\"event-details\">\n      <h2>{event.title}</h2>\n      <p>{event.description}</p>\n      <p>Date: {event.start_date}</p>\n      <p>Location: {event.location}</p>\n      <p>Capacity: {event.capacity}</p>\n      {/* Add RSVP button and other details */}\n    </div>\n  );\n};\n\nexport default EventDetails;"
          }
        ]
      },
      "migrations": [
        {
          "name": "0001_create_users_table.sql",
          "content": "-- CreateTable\nCREATE TABLE users (\n    id SERIAL PRIMARY KEY,\n    username VARCHAR(255) NOT NULL UNIQUE,\n    email VARCHAR(255) NOT NULL UNIQUE,\n    hashed_password VARCHAR(255) NOT NULL,\n    first_name VARCHAR(255),\n    last_name VARCHAR(255),\n    profile_picture_url VARCHAR(255),\n    bio TEXT,\n    is_active BOOLEAN NOT NULL DEFAULT true,\n    role VARCHAR(50) NOT NULL DEFAULT 'user', -- user, organizer, business, admin\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP\n);\n\nCREATE INDEX idx_users_email ON users (email);\nCREATE INDEX idx_users_username ON users (username);\n"
        },
        {
          "name": "0002_create_events_table.sql",
          "content": "-- CreateTable\nCREATE TABLE events (\n    id SERIAL PRIMARY KEY,\n    organizer_id INTEGER NOT NULL REFERENCES users(id),\n    title VARCHAR(255) NOT NULL,\n    description TEXT,\n    start_datetime TIMESTAMP WITH TIME ZONE NOT NULL,\n    end_datetime TIMESTAMP WITH TIME ZONE NOT NULL,\n    location_address VARCHAR(255) NOT NULL,\n    location_latitude NUMERIC(10, 6) NOT NULL,\n    location_longitude NUMERIC(10, 6) NOT NULL,\n    ticket_price NUMERIC(10, 2),\n    capacity INTEGER,\n    is_free BOOLEAN NOT NULL DEFAULT false,\n    is_published BOOLEAN NOT NULL DEFAULT false,\n    status VARCHAR(50) NOT NULL DEFAULT 'draft', -- draft, review, published, completed, archived\n    category VARCHAR(100),\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,\n    FOREIGN KEY (organizer_id) REFERENCES users(id)\n);\n\nCREATE INDEX idx_events_organizer_id ON events (organizer_id);\nCREATE INDEX idx_events_start_datetime ON events (start_datetime);\nCREATE INDEX idx_events_location ON events (location_latitude, location_longitude);\nCREATE INDEX idx_events_status ON events (status);\n"
        },
        {
          "name": "0003_create_rsvps_table.sql",
          "content": "-- CreateTable\nCREATE TABLE rsvps (\n    user_id INTEGER NOT NULL REFERENCES users(id),\n    event_id INTEGER NOT NULL REFERENCES events(id),\n    status VARCHAR(50) NOT NULL DEFAULT 'pending', -- pending, confirmed, cancelled, waitlisted\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,\n    PRIMARY KEY (user_id, event_id),\n    FOREIGN KEY (user_id) REFERENCES users(id),\n    FOREIGN KEY (event_id) REFERENCES events(id)\n);\n\nCREATE INDEX idx_rsvps_event_id ON rsvps (event_id);\nCREATE INDEX idx_rsvps_user_id ON rsvps (user_id);\n"
        },
        {
          "name": "0004_create_notifications_table.sql",
          "content": "-- CreateTable\nCREATE TABLE notifications (\n    id SERIAL PRIMARY KEY,\n    user_id INTEGER NOT NULL REFERENCES users(id),\n    event_id INTEGER REFERENCES events(id),\n    type VARCHAR(50) NOT NULL, -- event_update, rsvp_confirmed, reminder\n    content TEXT,\n    is_read BOOLEAN NOT NULL DEFAULT false,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,\n    FOREIGN KEY (user_id) REFERENCES users(id),\n    FOREIGN KEY (event_id) REFERENCES events(id)\n);\n\nCREATE INDEX idx_notifications_user_id ON notifications (user_id);\nCREATE INDEX idx_notifications_event_id ON notifications (event_id);\n"
        },
        {
          "name": "0005_create_follows_table.sql",
          "content": "-- CreateTable\nCREATE TABLE follows (\n    follower_id INTEGER NOT NULL REFERENCES users(id),\n    followed_id INTEGER NOT NULL REFERENCES users(id),\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,\n    PRIMARY KEY (follower_id, followed_id),\n    FOREIGN KEY (follower_id) REFERENCES users(id),\n    FOREIGN KEY (followed_id) REFERENCES users(id)\n);\n\nCREATE INDEX idx_follows_follower_id ON follows (follower_id);\nCREATE INDEX idx_follows_followed_id ON follows (followed_id);\n"
        },
        {
          "name": "0006_create_event_files_table.sql",
          "content": "-- CreateTable\nCREATE TABLE event_files (\n    id SERIAL PRIMARY KEY,\n    event_id INTEGER NOT NULL REFERENCES events(id),\n    file_url VARCHAR(255) NOT NULL,\n    file_type VARCHAR(50),\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,\n    FOREIGN KEY (event_id) REFERENCES events(id)\n);\n\nCREATE INDEX idx_event_files_event_id ON event_files (event_id);\n"
        },
        {
          "name": "0007_create_moderation_queue_table.sql",
          "content": "-- CreateTable\nCREATE TABLE moderation_queue (\n    id SERIAL PRIMARY KEY,\n    event_id INTEGER NOT NULL REFERENCES events(id),\n    reason TEXT,\n    status VARCHAR(50) NOT NULL DEFAULT 'pending', -- pending, approved, rejected\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,\n    FOREIGN KEY (event_id) REFERENCES events(id)\n);\n\nCREATE INDEX idx_moderation_queue_event_id ON moderation_queue (event_id);\n"
        },
        {
          "name": "0008_add_unique_constraints_to_users_and_events.sql",
          "content": "ALTER TABLE users ADD CONSTRAINT unique_email UNIQUE (email);\nALTER TABLE users ADD CONSTRAINT unique_username UNIQUE (username);\n"
        },
        {
          "name": "0009_add_index_to_event_title.sql",
          "content": "CREATE INDEX idx_events_title ON events (title);"
        }
      ]
    }
  },
  "extra": {
    "evaluation_requested": false,
    "evaluation": null
  }
}