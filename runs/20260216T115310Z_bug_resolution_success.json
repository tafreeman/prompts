{
  "run_id": "bug_resolution-a5bf5de8",
  "workflow_name": "bug_resolution",
  "status": "success",
  "score": 97.73,
  "success_rate": 100.0,
  "total_duration_ms": 22308.809,
  "total_retries": 0,
  "step_count": 5,
  "failed_step_count": 0,
  "start_time": "2026-02-16T11:52:47.988955+00:00",
  "end_time": "2026-02-16T11:53:10.297764+00:00",
  "dataset": {
    "source": "local",
    "dataset_id": "agentic-workflows-v2/tests/fixtures/datasets/swe_bench_verified.json",
    "dataset_path": "agentic-workflows-v2/tests/fixtures/datasets/swe_bench_verified.json",
    "sample_index": 2,
    "task_id": "2",
    "dataset_workflow_compatible": true,
    "dataset_mismatch_reasons": []
  },
  "inputs": {
    "bug_report": "Modeling's `separability_matrix` does not compute separability correctly for nested CompoundModels\nConsider the following model:\r\n\r\n```python\r\nfrom astropy.modeling import models as m\r\nfrom astropy.modeling.separable import separability_matrix\r\n\r\ncm = m.Linear1D(10) & m.Linear1D(5)\r\n```\r\n\r\nIt's separability matrix as you might expect is a diagonal:\r\n\r\n```python\r\n>>> separability_matrix(cm)\r\narray([[ True, False],\r\n       [False,  True]])\r\n```\r\n\r\nIf I make the model more complex:\r\n```python\r\n>>> separability_matrix(m.Pix2Sky_TAN() & m.Linear1D(10) & m.Linear1D(5))\r\narray([[ True,  True, False, False],\r\n       [ True,  True, False, False],\r\n       [False, False,  True, False],\r\n       [False, False, False,  True]])\r\n```\r\n\r\nThe output matrix is again, as expected, the outputs and inputs to the linear models are separable and independent of each other.\r\n\r\nIf however, I nest these compound models:\r\n```python\r\n>>> separability_matrix(m.Pix2Sky_TAN() & cm)\r\narray([[ True,  True, False, False],\r\n       [ True,  True, False, False],\r\n       [False, False,  True,  True],\r\n       [False, False,  True,  True]])\r\n```\r\nSuddenly the inputs and outputs are no longer separable?\r\n\r\nThis feels like a bug to me, but I might be missing something?\n",
    "code_file": "D:\\source\\prompts\\runs\\_inputs\\preview_code_file.py",
    "resolution_depth": "standard"
  },
  "steps": [
    {
      "step_name": "triage",
      "status": "success",
      "agent_role": null,
      "tier": 0,
      "model_used": null,
      "duration_ms": 4.138,
      "retry_count": 0,
      "tokens_used": null,
      "input": {
        "bug_report": "Modeling's `separability_matrix` does not compute separability correctly for nested CompoundModels\nConsider the following model:\r\n\r\n```python\r\nfrom astropy.modeling import models as m\r\nfrom astropy.modeling.separable import separability_matrix\r\n\r\ncm = m.Linear1D(10) & m.Linear1D(5)\r\n```\r\n\r\nIt's separability matrix as you might expect is a diagonal:\r\n\r\n```python\r\n>>> separability_matrix(cm)\r\narray([[ True, False],\r\n       [False,  True]])\r\n```\r\n\r\nIf I make the model more complex:\r\n```python\r\n>>> separability_matrix(m.Pix2Sky_TAN() & m.Linear1D(10) & m.Linear1D(5))\r\narray([[ True,  True, False, False],\r\n       [ True,  True, False, False],\r\n       [False, False,  True, False],\r\n       [False, False, False,  True]])\r\n```\r\n\r\nThe output matrix is again, as expected, the outputs and inputs to the linear models are separable and independent of each other.\r\n\r\nIf however, I nest these compound models:\r\n```python\r\n>>> separability_matrix(m.Pix2Sky_TAN() & cm)\r\narray([[ True,  True, False, False],\r\n       [ True,  True, False, False],\r\n       [False, False,  True,  True],\r\n       [False, False,  True,  True]])\r\n```\r\nSuddenly the inputs and outputs are no longer separable?\r\n\r\nThis feels like a bug to me, but I might be missing something?\n",
        "file_path": "D:\\source\\prompts\\runs\\_inputs\\preview_code_file.py"
      },
      "output": {
        "parsed_ast": {
          "raw_source": "diff --git a/astropy/modeling/separable.py b/astropy/modeling/separable.py\n--- a/astropy/modeling/separable.py\n+++ b/astropy/modeling/separable.py\n@@ -242,7 +242,7 @@ def _cstack(left, right):\n         cright = _coord_matrix(right, 'right', noutp)\n     else:\n         cright = np.zeros((noutp, right.shape[1]))\n-        cright[-right.shape[0]:, -right.shape[1]:] = 1\n+        cright[-right.shape[0]:, -right.shape[1]:] = right\n \n     return np.hstack([cleft, cright])\n \n",
          "language": "unknown",
          "parse_error": "Could not parse as Python"
        },
        "code_metrics": {
          "lines": 12,
          "chars": 470
        }
      },
      "error": null,
      "error_type": null,
      "start_time": "2026-02-16T11:52:47.989368+00:00",
      "end_time": "2026-02-16T11:52:47.993506+00:00",
      "metadata": null
    },
    {
      "step_name": "root_cause_analysis",
      "status": "success",
      "agent_role": null,
      "tier": 2,
      "model_used": "gemini:gemini-2.0-flash",
      "duration_ms": 4626.637,
      "retry_count": 0,
      "tokens_used": 3648,
      "input": {
        "symptoms": null,
        "affected_components": null
      },
      "output": {
        "root_cause": "The original `_cstack` function in `astropy/modeling/separable.py` incorrectly assigned a constant value of 1 to represent the separability contribution of the right-hand side model in a compound model. This caused incorrect separability calculations for nested `CompoundModel` instances because it bypassed the recursive separability calculation. The corrected code replaces the constant value with the actual separability matrix of the right-hand side model, enabling proper handling of nested models.",
        "review_report": {
          "overall_status": "APPROVED",
          "quality_score": 9.0,
          "summary": {
            "critical": 0,
            "high": 0,
            "medium": 0,
            "low": 0,
            "passed_checks": [
              "Input validation",
              "No hardcoded secrets",
              "Corrected separability calculation"
            ]
          },
          "findings": [],
          "positive_observations": [
            "The fix correctly addresses the separability calculation issue for nested CompoundModel instances."
          ]
        }
      },
      "error": null,
      "error_type": null,
      "start_time": "2026-02-16T11:52:47.995117+00:00",
      "end_time": "2026-02-16T11:52:52.621754+00:00",
      "metadata": null
    },
    {
      "step_name": "generate_fix",
      "status": "success",
      "agent_role": null,
      "tier": 2,
      "model_used": "gemini:gemini-2.0-flash",
      "duration_ms": 2315.6349999999998,
      "retry_count": 0,
      "tokens_used": 3821,
      "input": {
        "root_cause": "The original `_cstack` function in `astropy/modeling/separable.py` incorrectly assigned a constant value of 1 to represent the separability contribution of the right-hand side model in a compound model. This caused incorrect separability calculations for nested `CompoundModel` instances because it bypassed the recursive separability calculation. The corrected code replaces the constant value with the actual separability matrix of the right-hand side model, enabling proper handling of nested models.",
        "file_path": "D:\\source\\prompts\\runs\\_inputs\\preview_code_file.py"
      },
      "output": {
        "fix": "FILE: astropy/modeling/separable.py\n```diff\n--- a/astropy/modeling/separable.py\n+++ b/astropy/modeling/separable.py\n@@ -242,7 +242,7 @@ def _cstack(left, right):\n         cright = _coord_matrix(right, 'right', noutp)\\n     else:\\n         cright = np.zeros((noutp, right.shape[1]))\\n-        cright[-right.shape[0]:, -right.shape[1]:] = 1\\n+        cright[-right.shape[0]:, -right.shape[1]:] = right\\n \\n     return np.hstack([cleft, cright])\\n \\\n\n```\nENDFILE",
        "fix_files": {
          "astropy/modeling/separable.py": "```diff\n--- a/astropy/modeling/separable.py\n+++ b/astropy/modeling/separable.py\n@@ -242,7 +242,7 @@ def _cstack(left, right):\n         cright = _coord_matrix(right, 'right', noutp)\\n     else:\\n         cright = np.zeros((noutp, right.shape[1]))\\n-        cright[-right.shape[0]:, -right.shape[1]:] = 1\\n+        cright[-right.shape[0]:, -right.shape[1]:] = right\\n \\n     return np.hstack([cleft, cright])\\n \\\n\n```\n"
        }
      },
      "error": null,
      "error_type": null,
      "start_time": "2026-02-16T11:52:52.621914+00:00",
      "end_time": "2026-02-16T11:52:54.937549+00:00",
      "metadata": null
    },
    {
      "step_name": "regression_check",
      "status": "success",
      "agent_role": null,
      "tier": 1,
      "model_used": "gemini:gemini-2.0-flash-lite",
      "duration_ms": 4240.636,
      "retry_count": 0,
      "tokens_used": 4178,
      "input": {
        "fix": "FILE: astropy/modeling/separable.py\n```diff\n--- a/astropy/modeling/separable.py\n+++ b/astropy/modeling/separable.py\n@@ -242,7 +242,7 @@ def _cstack(left, right):\n         cright = _coord_matrix(right, 'right', noutp)\\n     else:\\n         cright = np.zeros((noutp, right.shape[1]))\\n-        cright[-right.shape[0]:, -right.shape[1]:] = 1\\n+        cright[-right.shape[0]:, -right.shape[1]:] = right\\n \\n     return np.hstack([cleft, cright])\\n \\\n\n```\nENDFILE",
        "affected_components": null
      },
      "output": {
        "regression_risks": {
          "severity": "medium",
          "justification": "The fix directly addresses the reported bug. The impact of an incorrect fix could be significant for models using CompoundModels, although the change is localized.",
          "affected_files": [
            "astropy/modeling/separable.py"
          ],
          "affected_functions": [
            "_cstack"
          ],
          "risk_factors": [
            "Correctness of separability calculation for nested CompoundModels",
            "Isolated change"
          ],
          "recommendations": [
            "Thorough testing of CompoundModels, especially nested ones, is recommended.",
            "Verify the fix with the test cases provided in the bug report."
          ]
        }
      },
      "error": null,
      "error_type": null,
      "start_time": "2026-02-16T11:52:54.939062+00:00",
      "end_time": "2026-02-16T11:52:59.179698+00:00",
      "metadata": null
    },
    {
      "step_name": "generate_verification",
      "status": "success",
      "agent_role": null,
      "tier": 2,
      "model_used": "gemini:gemini-2.0-flash",
      "duration_ms": 11117.84,
      "retry_count": 0,
      "tokens_used": 5612,
      "input": {
        "root_cause": "The original `_cstack` function in `astropy/modeling/separable.py` incorrectly assigned a constant value of 1 to represent the separability contribution of the right-hand side model in a compound model. This caused incorrect separability calculations for nested `CompoundModel` instances because it bypassed the recursive separability calculation. The corrected code replaces the constant value with the actual separability matrix of the right-hand side model, enabling proper handling of nested models.",
        "fix": "FILE: astropy/modeling/separable.py\n```diff\n--- a/astropy/modeling/separable.py\n+++ b/astropy/modeling/separable.py\n@@ -242,7 +242,7 @@ def _cstack(left, right):\n         cright = _coord_matrix(right, 'right', noutp)\\n     else:\\n         cright = np.zeros((noutp, right.shape[1]))\\n-        cright[-right.shape[0]:, -right.shape[1]:] = 1\\n+        cright[-right.shape[0]:, -right.shape[1]:] = right\\n \\n     return np.hstack([cleft, cright])\\n \\\n\n```\nENDFILE",
        "regression_risks": {
          "severity": "medium",
          "justification": "The fix directly addresses the reported bug. The impact of an incorrect fix could be significant for models using CompoundModels, although the change is localized.",
          "affected_files": [
            "astropy/modeling/separable.py"
          ],
          "affected_functions": [
            "_cstack"
          ],
          "risk_factors": [
            "Correctness of separability calculation for nested CompoundModels",
            "Isolated change"
          ],
          "recommendations": [
            "Thorough testing of CompoundModels, especially nested ones, is recommended.",
            "Verify the fix with the test cases provided in the bug report."
          ]
        }
      },
      "output": {
        "verification_report": "## Verification Report\n\n**Status:** NEEDS_WORK\n\n**Overall Summary:** The fix addresses the identified bug in the `separability_matrix` function for nested `CompoundModel` instances. Verification requires confirming the corrected separability matrices for the reported test cases and expanding tests to cover potential regression scenarios.\n\n**1. Bug Fix Verification**\n\n   **1.1. Test Case 1: Original Bug Report Example**\n\n      *   **Description:** Verify the separability matrix calculation for the nested `CompoundModel` example provided in the bug report.\n      *   **Setup:**\n          ```python\n          from astropy.modeling import models as m\n          from astropy.modeling.separable import separability_matrix\n          cm = m.Linear1D(10) & m.Linear1D(5)\n          model = m.Pix2Sky_TAN() & cm\n          ```\n      *   **Test Steps:**\n          1.  Execute the code snippet in a Python environment with the patched `astropy` library.\n          2.  Calculate the separability matrix using `separability_matrix(model)`.\n      *   **Expected Result:**\n          The separability matrix should be:\n          ```\n          array([[ True,  True, False, False],\n                 [ True,  True, False, False],\n                 [False, False,  True, False],\n                 [False, False, False,  True]])\n          ```\n      *   **Status:** NEEDS_WORK (Requires execution and result comparison)\n\n   **1.2. Test Case 2: Simple Compound Model**\n\n      *   **Description:** Verify separability matrix for a simple compound model without nesting.\n      *   **Setup:**\n          ```python\n          from astropy.modeling import models as m\n          from astropy.modeling.separable import separability_matrix\n          model = m.Linear1D(10) & m.Gaussian1D(1, 5, 1)\n          ```\n      *   **Test Steps:**\n          1.  Execute the code snippet in a Python environment with the patched `astropy` library.\n          2.  Calculate the separability matrix using `separability_matrix(model)`.\n      *   **Expected Result:**\n          ```\n          array([[ True, False, False],\n                 [False,  True, False],\n                 [False, False,  True]])\n          ```\n      *   **Status:** NEEDS_WORK (Requires execution and result comparison)\n\n   **1.3. Test Case 3: Deeper Nesting**\n\n      *   **Description:** Verify the separability matrix calculation for a more deeply nested `CompoundModel`.\n      *   **Setup:**\n          ```python\n          from astropy.modeling import models as m\n          from astropy.modeling.separable import separability_matrix\n          cm1 = m.Linear1D(10) & m.Linear1D(5)\n          cm2 = m.Gaussian1D(1, 5, 1) & m.Const1D(2)\n          model = m.Pix2Sky_TAN() & (cm1 | cm2) # Using \"|\" for parallel composition\n          ```\n      *   **Test Steps:**\n          1.  Execute the code snippet in a Python environment with the patched `astropy` library.\n          2.  Calculate the separability matrix using `separability_matrix(model)`.\n      *   **Expected Result:**\n          ```\n          array([[ True,  True, False, False, False, False],\n                 [ True,  True, False, False, False, False],\n                 [False, False,  True, False, False, False],\n                 [False, False, False,  True, False, False],\n                 [False, False, False, False,  True, False],\n                 [False, False, False, False, False,  True]])\n          ```\n      *   **Status:** NEEDS_WORK (Requires execution and result comparison)\n\n**2. Regression Testing**\n\n   **2.1. Test Existing Separability Tests**\n\n      *   **Description:** Run all existing tests in `astropy/modeling` related to separability to ensure no regressions were introduced.\n      *   **Steps:**\n          1.  Execute the existing test suite.\n          2.  Confirm that all tests pass.\n      *   **Expected Result:** All existing tests should pass.\n      *   **Status:** NEEDS_WORK (Requires execution and result comparison)\n\n   **2.2. Test with Different Model Combinations**\n\n      *   **Description:** Create new tests using various `Model` combinations (e.g., `Polynomial2D` & `Gaussian2D`, `Shift` & `Scale`) within `CompoundModel` to ensure general correctness.\n      *   **Steps:**\n          1.  Define several `CompoundModel` instances with different combinations of base models.\n          2.  Calculate the separability matrix for each model.\n          3.  Verify the resulting matrix aligns with the expected separability based on the model composition.  This requires manual inspection and understanding of the models.\n      *   **Expected Result:** The separability matrices should accurately reflect the separability of inputs and outputs for each model combination.\n      *   **Status:** NEEDS_WORK (Requires test creation, execution, and result validation)\n\n**3. Edge Cases**\n\n   **3.1. Models with No Inputs/Outputs**\n\n      *   **Description:** Test with models that have no inputs or outputs to ensure the function handles these cases gracefully.\n      *   **Setup:** Use `Const1D` or similar models.\n      *   **Steps:** Construct `CompoundModel` instances using these models and calculate `separability_matrix`.\n      *   **Expected Result:** The function should not raise errors and return a valid (likely empty or identity) matrix.\n      *   **Status:** NEEDS_WORK (Requires test execution and result validation)\n\n**4. Definition of Done**\n\n*   All test cases in sections 1 and 2 must pass.\n*   Edge cases in section 3 must be handled without errors.\n*   Code review confirms the fix is correctly implemented and doesn't introduce new issues.\n\n**Severity:** IMMEDIATE (Incorrect separability calculations can lead to incorrect model interpretations.)"
      },
      "error": null,
      "error_type": null,
      "start_time": "2026-02-16T11:52:59.179825+00:00",
      "end_time": "2026-02-16T11:53:10.297665+00:00",
      "metadata": null
    }
  ],
  "final_output": {
    "root_cause": "The original `_cstack` function in `astropy/modeling/separable.py` incorrectly assigned a constant value of 1 to represent the separability contribution of the right-hand side model in a compound model. This caused incorrect separability calculations for nested `CompoundModel` instances because it bypassed the recursive separability calculation. The corrected code replaces the constant value with the actual separability matrix of the right-hand side model, enabling proper handling of nested models.",
    "fix": "FILE: astropy/modeling/separable.py\n```diff\n--- a/astropy/modeling/separable.py\n+++ b/astropy/modeling/separable.py\n@@ -242,7 +242,7 @@ def _cstack(left, right):\n         cright = _coord_matrix(right, 'right', noutp)\\n     else:\\n         cright = np.zeros((noutp, right.shape[1]))\\n-        cright[-right.shape[0]:, -right.shape[1]:] = 1\\n+        cright[-right.shape[0]:, -right.shape[1]:] = right\\n \\n     return np.hstack([cleft, cright])\\n \\\n\n```\nENDFILE",
    "verification_report": "## Verification Report\n\n**Status:** NEEDS_WORK\n\n**Overall Summary:** The fix addresses the identified bug in the `separability_matrix` function for nested `CompoundModel` instances. Verification requires confirming the corrected separability matrices for the reported test cases and expanding tests to cover potential regression scenarios.\n\n**1. Bug Fix Verification**\n\n   **1.1. Test Case 1: Original Bug Report Example**\n\n      *   **Description:** Verify the separability matrix calculation for the nested `CompoundModel` example provided in the bug report.\n      *   **Setup:**\n          ```python\n          from astropy.modeling import models as m\n          from astropy.modeling.separable import separability_matrix\n          cm = m.Linear1D(10) & m.Linear1D(5)\n          model = m.Pix2Sky_TAN() & cm\n          ```\n      *   **Test Steps:**\n          1.  Execute the code snippet in a Python environment with the patched `astropy` library.\n          2.  Calculate the separability matrix using `separability_matrix(model)`.\n      *   **Expected Result:**\n          The separability matrix should be:\n          ```\n          array([[ True,  True, False, False],\n                 [ True,  True, False, False],\n                 [False, False,  True, False],\n                 [False, False, False,  True]])\n          ```\n      *   **Status:** NEEDS_WORK (Requires execution and result comparison)\n\n   **1.2. Test Case 2: Simple Compound Model**\n\n      *   **Description:** Verify separability matrix for a simple compound model without nesting.\n      *   **Setup:**\n          ```python\n          from astropy.modeling import models as m\n          from astropy.modeling.separable import separability_matrix\n          model = m.Linear1D(10) & m.Gaussian1D(1, 5, 1)\n          ```\n      *   **Test Steps:**\n          1.  Execute the code snippet in a Python environment with the patched `astropy` library.\n          2.  Calculate the separability matrix using `separability_matrix(model)`.\n      *   **Expected Result:**\n          ```\n          array([[ True, False, False],\n                 [False,  True, False],\n                 [False, False,  True]])\n          ```\n      *   **Status:** NEEDS_WORK (Requires execution and result comparison)\n\n   **1.3. Test Case 3: Deeper Nesting**\n\n      *   **Description:** Verify the separability matrix calculation for a more deeply nested `CompoundModel`.\n      *   **Setup:**\n          ```python\n          from astropy.modeling import models as m\n          from astropy.modeling.separable import separability_matrix\n          cm1 = m.Linear1D(10) & m.Linear1D(5)\n          cm2 = m.Gaussian1D(1, 5, 1) & m.Const1D(2)\n          model = m.Pix2Sky_TAN() & (cm1 | cm2) # Using \"|\" for parallel composition\n          ```\n      *   **Test Steps:**\n          1.  Execute the code snippet in a Python environment with the patched `astropy` library.\n          2.  Calculate the separability matrix using `separability_matrix(model)`.\n      *   **Expected Result:**\n          ```\n          array([[ True,  True, False, False, False, False],\n                 [ True,  True, False, False, False, False],\n                 [False, False,  True, False, False, False],\n                 [False, False, False,  True, False, False],\n                 [False, False, False, False,  True, False],\n                 [False, False, False, False, False,  True]])\n          ```\n      *   **Status:** NEEDS_WORK (Requires execution and result comparison)\n\n**2. Regression Testing**\n\n   **2.1. Test Existing Separability Tests**\n\n      *   **Description:** Run all existing tests in `astropy/modeling` related to separability to ensure no regressions were introduced.\n      *   **Steps:**\n          1.  Execute the existing test suite.\n          2.  Confirm that all tests pass.\n      *   **Expected Result:** All existing tests should pass.\n      *   **Status:** NEEDS_WORK (Requires execution and result comparison)\n\n   **2.2. Test with Different Model Combinations**\n\n      *   **Description:** Create new tests using various `Model` combinations (e.g., `Polynomial2D` & `Gaussian2D`, `Shift` & `Scale`) within `CompoundModel` to ensure general correctness.\n      *   **Steps:**\n          1.  Define several `CompoundModel` instances with different combinations of base models.\n          2.  Calculate the separability matrix for each model.\n          3.  Verify the resulting matrix aligns with the expected separability based on the model composition.  This requires manual inspection and understanding of the models.\n      *   **Expected Result:** The separability matrices should accurately reflect the separability of inputs and outputs for each model combination.\n      *   **Status:** NEEDS_WORK (Requires test creation, execution, and result validation)\n\n**3. Edge Cases**\n\n   **3.1. Models with No Inputs/Outputs**\n\n      *   **Description:** Test with models that have no inputs or outputs to ensure the function handles these cases gracefully.\n      *   **Setup:** Use `Const1D` or similar models.\n      *   **Steps:** Construct `CompoundModel` instances using these models and calculate `separability_matrix`.\n      *   **Expected Result:** The function should not raise errors and return a valid (likely empty or identity) matrix.\n      *   **Status:** NEEDS_WORK (Requires test execution and result validation)\n\n**4. Definition of Done**\n\n*   All test cases in sections 1 and 2 must pass.\n*   Edge cases in section 3 must be handled without errors.\n*   Code review confirms the fix is correctly implemented and doesn't introduce new issues.\n\n**Severity:** IMMEDIATE (Incorrect separability calculations can lead to incorrect model interpretations.)"
  },
  "extra": {
    "evaluation_requested": true,
    "evaluation": {
      "enabled": true,
      "rubric": "bug_resolution_v1",
      "rubric_id": "bug_resolution_v1",
      "rubric_version": "1.0.0",
      "criteria": [
        {
          "criterion": "documentation",
          "raw_score": 93.0,
          "normalized_score": 0.93,
          "adjusted_normalized_score": 0.586,
          "score": 93.0,
          "weight": 0.1,
          "formula_id": "zero_one",
          "critical_floor": null,
          "floor_passed": true,
          "max_score": 100.0
        },
        {
          "criterion": "root_cause_accuracy",
          "raw_score": 100.0,
          "normalized_score": 1.0,
          "adjusted_normalized_score": 0.6,
          "score": 100.0,
          "weight": 0.35,
          "formula_id": "zero_one",
          "critical_floor": 0.7,
          "floor_passed": true,
          "max_score": 100.0
        },
        {
          "criterion": "fix_quality",
          "raw_score": 100.0,
          "normalized_score": 1.0,
          "adjusted_normalized_score": 0.6,
          "score": 100.0,
          "weight": 0.35,
          "formula_id": "zero_one",
          "critical_floor": 0.75,
          "floor_passed": true,
          "max_score": 100.0
        },
        {
          "criterion": "verification",
          "raw_score": 100.0,
          "normalized_score": 1.0,
          "adjusted_normalized_score": 0.6,
          "score": 100.0,
          "weight": 0.2,
          "formula_id": "zero_one",
          "critical_floor": null,
          "floor_passed": true,
          "max_score": 100.0
        }
      ],
      "overall_score": 98.25,
      "weighted_score": 97.73,
      "objective_weighted_score": 99.3,
      "grade": "A",
      "passed": true,
      "pass_threshold": 70.0,
      "step_scores": [
        {
          "step_name": "triage",
          "status": "success",
          "score": 100.0
        },
        {
          "step_name": "root_cause_analysis",
          "status": "success",
          "score": 100.0
        },
        {
          "step_name": "generate_fix",
          "status": "success",
          "score": 100.0
        },
        {
          "step_name": "regression_check",
          "status": "success",
          "score": 100.0
        },
        {
          "step_name": "generate_verification",
          "status": "success",
          "score": 100.0
        }
      ],
      "dataset": {
        "source": "local",
        "dataset_id": "agentic-workflows-v2/tests/fixtures/datasets/swe_bench_verified.json",
        "dataset_path": "agentic-workflows-v2/tests/fixtures/datasets/swe_bench_verified.json",
        "sample_index": 2,
        "task_id": "2",
        "dataset_workflow_compatible": true,
        "dataset_mismatch_reasons": []
      },
      "score_layers": {
        "layer1_objective": 99.3,
        "layer2_judge": null,
        "layer3_similarity": 99.3,
        "layer3_efficiency": 75.49,
        "layer3_advisory": 91.44
      },
      "hybrid_weights": {
        "objective": 0.6,
        "advisory": 0.15
      },
      "judge": null,
      "generated_at": "2026-02-16T11:53:10.334053+00:00",
      "hard_gates": {
        "required_outputs_present": true,
        "overall_status_success": true,
        "no_critical_step_failures": true,
        "schema_contract_valid": true,
        "dataset_workflow_compatible": true
      },
      "hard_gate_failures": [],
      "floor_violations": [],
      "grade_capped": false
    }
  }
}