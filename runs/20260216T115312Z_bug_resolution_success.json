{
  "run_id": "bug_resolution-81462afb",
  "workflow_name": "bug_resolution",
  "status": "success",
  "score": 97.54,
  "success_rate": 100.0,
  "total_duration_ms": 24653.106,
  "total_retries": 0,
  "step_count": 5,
  "failed_step_count": 0,
  "start_time": "2026-02-16T11:52:47.908336+00:00",
  "end_time": "2026-02-16T11:53:12.561442+00:00",
  "dataset": {
    "source": "local",
    "dataset_id": "agentic-workflows-v2/tests/fixtures/datasets/swe_bench_verified.json",
    "dataset_path": "agentic-workflows-v2/tests/fixtures/datasets/swe_bench_verified.json",
    "sample_index": 0,
    "task_id": "0",
    "dataset_workflow_compatible": true,
    "dataset_mismatch_reasons": []
  },
  "inputs": {
    "bug_report": "Modeling's `separability_matrix` does not compute separability correctly for nested CompoundModels\nConsider the following model:\r\n\r\n```python\r\nfrom astropy.modeling import models as m\r\nfrom astropy.modeling.separable import separability_matrix\r\n\r\ncm = m.Linear1D(10) & m.Linear1D(5)\r\n```\r\n\r\nIt's separability matrix as you might expect is a diagonal:\r\n\r\n```python\r\n>>> separability_matrix(cm)\r\narray([[ True, False],\r\n       [False,  True]])\r\n```\r\n\r\nIf I make the model more complex:\r\n```python\r\n>>> separability_matrix(m.Pix2Sky_TAN() & m.Linear1D(10) & m.Linear1D(5))\r\narray([[ True,  True, False, False],\r\n       [ True,  True, False, False],\r\n       [False, False,  True, False],\r\n       [False, False, False,  True]])\r\n```\r\n\r\nThe output matrix is again, as expected, the outputs and inputs to the linear models are separable and independent of each other.\r\n\r\nIf however, I nest these compound models:\r\n```python\r\n>>> separability_matrix(m.Pix2Sky_TAN() & cm)\r\narray([[ True,  True, False, False],\r\n       [ True,  True, False, False],\r\n       [False, False,  True,  True],\r\n       [False, False,  True,  True]])\r\n```\r\nSuddenly the inputs and outputs are no longer separable?\r\n\r\nThis feels like a bug to me, but I might be missing something?\n",
    "code_file": "D:\\source\\prompts\\runs\\_inputs\\preview_code_file.py",
    "resolution_depth": "standard"
  },
  "steps": [
    {
      "step_name": "triage",
      "status": "success",
      "agent_role": null,
      "tier": 0,
      "model_used": null,
      "duration_ms": 0.9259999999999999,
      "retry_count": 0,
      "tokens_used": null,
      "input": {
        "bug_report": "Modeling's `separability_matrix` does not compute separability correctly for nested CompoundModels\nConsider the following model:\r\n\r\n```python\r\nfrom astropy.modeling import models as m\r\nfrom astropy.modeling.separable import separability_matrix\r\n\r\ncm = m.Linear1D(10) & m.Linear1D(5)\r\n```\r\n\r\nIt's separability matrix as you might expect is a diagonal:\r\n\r\n```python\r\n>>> separability_matrix(cm)\r\narray([[ True, False],\r\n       [False,  True]])\r\n```\r\n\r\nIf I make the model more complex:\r\n```python\r\n>>> separability_matrix(m.Pix2Sky_TAN() & m.Linear1D(10) & m.Linear1D(5))\r\narray([[ True,  True, False, False],\r\n       [ True,  True, False, False],\r\n       [False, False,  True, False],\r\n       [False, False, False,  True]])\r\n```\r\n\r\nThe output matrix is again, as expected, the outputs and inputs to the linear models are separable and independent of each other.\r\n\r\nIf however, I nest these compound models:\r\n```python\r\n>>> separability_matrix(m.Pix2Sky_TAN() & cm)\r\narray([[ True,  True, False, False],\r\n       [ True,  True, False, False],\r\n       [False, False,  True,  True],\r\n       [False, False,  True,  True]])\r\n```\r\nSuddenly the inputs and outputs are no longer separable?\r\n\r\nThis feels like a bug to me, but I might be missing something?\n",
        "file_path": "D:\\source\\prompts\\runs\\_inputs\\preview_code_file.py"
      },
      "output": {
        "parsed_ast": {
          "raw_source": "diff --git a/astropy/modeling/separable.py b/astropy/modeling/separable.py\n--- a/astropy/modeling/separable.py\n+++ b/astropy/modeling/separable.py\n@@ -242,7 +242,7 @@ def _cstack(left, right):\n         cright = _coord_matrix(right, 'right', noutp)\n     else:\n         cright = np.zeros((noutp, right.shape[1]))\n-        cright[-right.shape[0]:, -right.shape[1]:] = 1\n+        cright[-right.shape[0]:, -right.shape[1]:] = right\n \n     return np.hstack([cleft, cright])\n \n",
          "language": "unknown",
          "parse_error": "Could not parse as Python"
        },
        "code_metrics": {
          "lines": 12,
          "chars": 470
        }
      },
      "error": null,
      "error_type": null,
      "start_time": "2026-02-16T11:52:47.908732+00:00",
      "end_time": "2026-02-16T11:52:47.909658+00:00",
      "metadata": null
    },
    {
      "step_name": "root_cause_analysis",
      "status": "success",
      "agent_role": null,
      "tier": 2,
      "model_used": "gemini:gemini-2.0-flash",
      "duration_ms": 5019.254,
      "retry_count": 0,
      "tokens_used": 3746,
      "input": {
        "symptoms": null,
        "affected_components": null
      },
      "output": {
        "root_cause": "The bug in `separability_matrix` for nested `CompoundModel`s stems from the incorrect assignment within the `_cstack` function in `astropy/modeling/separable.py`.  The line `cright[-right.shape[0]:, -right.shape[1]:] = right` attempts to assign the `right` matrix (which represents the separability matrix of the right-hand side model) directly into a section of the `cright` matrix.  However, the intent was to assign a value of 1 (or True) to indicate that the inputs/outputs of the right-hand side are separable from the left-hand side.  When `right` is a nested `CompoundModel`, its separability matrix is not a simple boolean value, leading to the observed incorrect behavior.  The code was intended to only assign a value of 1 when the right-hand side is not a `CompoundModel`.",
        "review_report": {
          "overall_status": "NEEDS_FIXES",
          "quality_score": 6.0,
          "summary": {
            "critical": 0,
            "high": 1,
            "medium": 0,
            "low": 0,
            "passed_checks": []
          },
          "findings": [
            {
              "finding_id": "F-001",
              "severity": "high",
              "category": "quality",
              "title": "Incorrect separability matrix calculation for nested CompoundModels",
              "file": "astropy/modeling/separable.py",
              "line_range": [
                245,
                245
              ],
              "description": "The `_cstack` function incorrectly assigns the `right` matrix instead of a boolean value (1) when dealing with nested CompoundModels, leading to an incorrect separability matrix.",
              "impact": "The `separability_matrix` function returns incorrect results for nested CompoundModels, potentially affecting downstream analyses that rely on this information.",
              "suggested_fix": "Modify the `_cstack` function to correctly assign a boolean value (1) to indicate separability when the right-hand side is not a CompoundModel.  When the right-hand side *is* a CompoundModel, ensure its separability matrix is incorporated correctly.",
              "code_before": "cright[-right.shape[0]:, -right.shape[1]:] = right",
              "code_after": "cright[-right.shape[0]:, -right.shape[1]:] = np.ones_like(right)",
              "references": []
            }
          ],
          "positive_observations": []
        }
      },
      "error": null,
      "error_type": null,
      "start_time": "2026-02-16T11:52:47.909811+00:00",
      "end_time": "2026-02-16T11:52:52.929065+00:00",
      "metadata": null
    },
    {
      "step_name": "generate_fix",
      "status": "success",
      "agent_role": null,
      "tier": 2,
      "model_used": "gemini:gemini-2.0-flash",
      "duration_ms": 1508.7269999999999,
      "retry_count": 0,
      "tokens_used": 4210,
      "input": {
        "root_cause": "The bug in `separability_matrix` for nested `CompoundModel`s stems from the incorrect assignment within the `_cstack` function in `astropy/modeling/separable.py`.  The line `cright[-right.shape[0]:, -right.shape[1]:] = right` attempts to assign the `right` matrix (which represents the separability matrix of the right-hand side model) directly into a section of the `cright` matrix.  However, the intent was to assign a value of 1 (or True) to indicate that the inputs/outputs of the right-hand side are separable from the left-hand side.  When `right` is a nested `CompoundModel`, its separability matrix is not a simple boolean value, leading to the observed incorrect behavior.  The code was intended to only assign a value of 1 when the right-hand side is not a `CompoundModel`.",
        "file_path": "D:\\source\\prompts\\runs\\_inputs\\preview_code_file.py"
      },
      "output": {
        "fix": "FILE: astropy/modeling/separable.py\n```diff\n--- a/astropy/modeling/separable.py\n+++ b/astropy/modeling/separable.py\n@@ -242,7 +242,7 @@ def _cstack(left, right):\\n         cright = _coord_matrix(right, 'right', noutp)\\n     else:\\n         cright = np.zeros((noutp, right.shape[1]))\\n-        cright[-right.shape[0]:, -right.shape[1]:] = 1\\n+        cright[-right.shape[0]:, -right.shape[1]:] = np.ones_like(right)\n \\n     return np.hstack([cleft, cright])\\n \\\n\n```\nENDFILE",
        "fix_files": {
          "astropy/modeling/separable.py": "```diff\n--- a/astropy/modeling/separable.py\n+++ b/astropy/modeling/separable.py\n@@ -242,7 +242,7 @@ def _cstack(left, right):\\n         cright = _coord_matrix(right, 'right', noutp)\\n     else:\\n         cright = np.zeros((noutp, right.shape[1]))\\n-        cright[-right.shape[0]:, -right.shape[1]:] = 1\\n+        cright[-right.shape[0]:, -right.shape[1]:] = np.ones_like(right)\n \\n     return np.hstack([cleft, cright])\\n \\\n\n```\n"
        }
      },
      "error": null,
      "error_type": null,
      "start_time": "2026-02-16T11:52:52.929193+00:00",
      "end_time": "2026-02-16T11:52:54.437920+00:00",
      "metadata": null
    },
    {
      "step_name": "regression_check",
      "status": "success",
      "agent_role": null,
      "tier": 1,
      "model_used": "gemini:gemini-2.0-flash-lite",
      "duration_ms": 3687.2639999999997,
      "retry_count": 0,
      "tokens_used": 4583,
      "input": {
        "fix": "FILE: astropy/modeling/separable.py\n```diff\n--- a/astropy/modeling/separable.py\n+++ b/astropy/modeling/separable.py\n@@ -242,7 +242,7 @@ def _cstack(left, right):\\n         cright = _coord_matrix(right, 'right', noutp)\\n     else:\\n         cright = np.zeros((noutp, right.shape[1]))\\n-        cright[-right.shape[0]:, -right.shape[1]:] = 1\\n+        cright[-right.shape[0]:, -right.shape[1]:] = np.ones_like(right)\n \\n     return np.hstack([cleft, cright])\\n \\\n\n```\nENDFILE",
        "affected_components": null
      },
      "output": {
        "raw_response": "Okay, I will analyze the proposed fix for potential regressions, focusing on code quality metrics, complexity, and regression risk.\n\nThe proposed fix modifies `astropy/modeling/separable.py`. The root cause analysis indicates the fix addresses an issue where the `separability_matrix` function was not correctly handling nested `CompoundModel`s. The fix replaces `cright[-right.shape[0]:, -right.shape[1]:] = right` with `cright[-right.shape[0]:, -right.shape[1]:] = np.ones_like(right)`.\n\nHere's my analysis:\n\n**1. Code Analysis and Complexity:**\n\n*   **File:** `astropy/modeling/separable.py`\n    *   The change is localized to a single line within the `_cstack` function.\n    *   The change replaces assignment of the `right` matrix with assignment of an array of ones.\n    *   Cyclomatic complexity is not significantly altered. The fix itself doesn't introduce new branches or loops.\n    *   No significant change in code size.\n\n**2. Regression Risk Assessment:**\n\n*   **Change Impact:** The change directly addresses a bug in the calculation of the separability matrix, specifically when dealing with nested compound models. This suggests a potential for regression if the fix is incorrect.\n*   **Test Coverage:** I will determine the test coverage for the modified code. This will help assess how well the fix is tested.\n*   **Callers of Modified Functions:** The `_cstack` function is internal. The `separability_matrix` function is likely the caller.\n*   **Untested Code Paths:**  I'll look for any untested code paths in the modified area.\n*   **Risk Scoring:** Based on the above, I'll score the regression risk.\n\n**3. Dependency Analysis:**\n\n*   The change is within a single file. No new dependencies are introduced.\n*   No circular dependencies are introduced or removed.\n\nNow I will use the tools to gather more information, starting with reading the file and checking the tests.\n\n```tool_code\nprint(file_read(file_path='astropy/modeling/separable.py'))\n```"
      },
      "error": null,
      "error_type": null,
      "start_time": "2026-02-16T11:52:54.438036+00:00",
      "end_time": "2026-02-16T11:52:58.125300+00:00",
      "metadata": null
    },
    {
      "step_name": "generate_verification",
      "status": "success",
      "agent_role": null,
      "tier": 2,
      "model_used": "gemini:gemini-2.0-flash",
      "duration_ms": 14435.816,
      "retry_count": 0,
      "tokens_used": 7161,
      "input": {
        "root_cause": "The bug in `separability_matrix` for nested `CompoundModel`s stems from the incorrect assignment within the `_cstack` function in `astropy/modeling/separable.py`.  The line `cright[-right.shape[0]:, -right.shape[1]:] = right` attempts to assign the `right` matrix (which represents the separability matrix of the right-hand side model) directly into a section of the `cright` matrix.  However, the intent was to assign a value of 1 (or True) to indicate that the inputs/outputs of the right-hand side are separable from the left-hand side.  When `right` is a nested `CompoundModel`, its separability matrix is not a simple boolean value, leading to the observed incorrect behavior.  The code was intended to only assign a value of 1 when the right-hand side is not a `CompoundModel`.",
        "fix": "FILE: astropy/modeling/separable.py\n```diff\n--- a/astropy/modeling/separable.py\n+++ b/astropy/modeling/separable.py\n@@ -242,7 +242,7 @@ def _cstack(left, right):\\n         cright = _coord_matrix(right, 'right', noutp)\\n     else:\\n         cright = np.zeros((noutp, right.shape[1]))\\n-        cright[-right.shape[0]:, -right.shape[1]:] = 1\\n+        cright[-right.shape[0]:, -right.shape[1]:] = np.ones_like(right)\n \\n     return np.hstack([cleft, cright])\\n \\\n\n```\nENDFILE",
        "regression_risks": null
      },
      "output": {
        "verification_report": {
          "status": "NEEDS_WORK",
          "verification_report": {
            "summary": "The fix addresses the incorrect separability matrix calculation for nested CompoundModels. Verification will focus on confirming the fix resolves the reported bug and doesn't introduce regressions in other separability matrix calculations.",
            "test_plan": [
              {
                "test_id": "V-001",
                "title": "Verify Correct Separability Matrix for Nested Compound Model (Original Bug)",
                "description": "This test recreates the original bug report's nested compound model and asserts that the separability matrix is now calculated correctly.",
                "setup": "Define the nested compound model `m.Pix2Sky_TAN() & cm` where `cm = m.Linear1D(10) & m.Linear1D(5)`.",
                "execution": "Calculate the separability matrix using `separability_matrix(m.Pix2Sky_TAN() & cm)`.",
                "expected_result": "The separability matrix should be a 4x4 array with the following structure:\n```\narray([[ True,  True, False, False],\n       [ True,  True, False, False],\n       [False, False,  True, False],\n       [False, False, False,  True]])\n```",
                "priority": "immediate"
              },
              {
                "test_id": "V-002",
                "title": "Verify Correct Separability Matrix for Non-Nested Compound Model",
                "description": "This test checks that the fix doesn't negatively impact the calculation of separability matrices for simple, non-nested compound models.",
                "setup": "Define the compound model `m.Linear1D(10) & m.Linear1D(5)`.",
                "execution": "Calculate the separability matrix using `separability_matrix(m.Linear1D(10) & m.Linear1D(5))`.",
                "expected_result": "The separability matrix should be a 2x2 array with the following structure:\n```\narray([[ True, False],\n       [False,  True]])\n```",
                "priority": "immediate"
              },
              {
                "test_id": "V-003",
                "title": "Verify Correct Separability Matrix for Complex Non-Nested Compound Model",
                "description": "This test checks that the fix doesn't negatively impact the calculation of separability matrices for complex, non-nested compound models (as in the original bug report).",
                "setup": "Define the compound model `m.Pix2Sky_TAN() & m.Linear1D(10) & m.Linear1D(5)`.",
                "execution": "Calculate the separability matrix using `separability_matrix(m.Pix2Sky_TAN() & m.Linear1D(10) & m.Linear1D(5))`.",
                "expected_result": "The separability matrix should be a 4x4 array with the following structure:\n```\narray([[ True,  True, False, False],\n       [ True,  True, False, False],\n       [False, False,  True, False],\n       [False, False, False,  True]])\n```",
                "priority": "soon"
              },
              {
                "test_id": "V-004",
                "title": "Verify Separability Matrix with Different Nested Structures",
                "description": "This test checks the separability matrix calculation for various levels of nesting of CompoundModels. This helps ensure that the fix generalizes to different nesting scenarios.",
                "setup": "Define models with different levels of nesting, e.g., `(m.Linear1D(10) & m.Linear1D(5)) & m.Gaussian1D(amplitude=1, mean=0, stddev=1)` and `m.Gaussian1D(amplitude=1, mean=0, stddev=1) & (m.Linear1D(10) & m.Linear1D(5))`.",
                "execution": "Calculate the separability matrix for each model.",
                "expected_result": "The separability matrix should reflect the separability of the inputs and outputs of the constituent models.  Specifically, inputs/outputs within a nested CompoundModel should *not* be reported as separable from each other, but inputs/outputs of separate CompoundModels should be separable.",
                "priority": "soon"
              },
              {
                "test_id": "V-005",
                "title": "Check Separability Matrix for Single Model",
                "description": "Checks that a single, non-compound model returns a trivial separability matrix.",
                "setup": "Define a simple model, e.g., `m.Gaussian1D(amplitude=1, mean=0, stddev=1)`.",
                "execution": "Calculate the separability matrix.",
                "expected_result": "The separability matrix should be a 1x1 array with a value of True.",
                "priority": "backlog"
              }
            ],
            "done_definition": "All tests pass, demonstrating that the fix correctly calculates separability matrices for nested CompoundModels without introducing regressions in other cases.",
            "test_execution": [],
            "unresolved_issues": []
          }
        }
      },
      "error": null,
      "error_type": null,
      "start_time": "2026-02-16T11:52:58.125524+00:00",
      "end_time": "2026-02-16T11:53:12.561340+00:00",
      "metadata": null
    }
  ],
  "final_output": {
    "root_cause": "The bug in `separability_matrix` for nested `CompoundModel`s stems from the incorrect assignment within the `_cstack` function in `astropy/modeling/separable.py`.  The line `cright[-right.shape[0]:, -right.shape[1]:] = right` attempts to assign the `right` matrix (which represents the separability matrix of the right-hand side model) directly into a section of the `cright` matrix.  However, the intent was to assign a value of 1 (or True) to indicate that the inputs/outputs of the right-hand side are separable from the left-hand side.  When `right` is a nested `CompoundModel`, its separability matrix is not a simple boolean value, leading to the observed incorrect behavior.  The code was intended to only assign a value of 1 when the right-hand side is not a `CompoundModel`.",
    "fix": "FILE: astropy/modeling/separable.py\n```diff\n--- a/astropy/modeling/separable.py\n+++ b/astropy/modeling/separable.py\n@@ -242,7 +242,7 @@ def _cstack(left, right):\\n         cright = _coord_matrix(right, 'right', noutp)\\n     else:\\n         cright = np.zeros((noutp, right.shape[1]))\\n-        cright[-right.shape[0]:, -right.shape[1]:] = 1\\n+        cright[-right.shape[0]:, -right.shape[1]:] = np.ones_like(right)\n \\n     return np.hstack([cleft, cright])\\n \\\n\n```\nENDFILE",
    "verification_report": {
      "status": "NEEDS_WORK",
      "verification_report": {
        "summary": "The fix addresses the incorrect separability matrix calculation for nested CompoundModels. Verification will focus on confirming the fix resolves the reported bug and doesn't introduce regressions in other separability matrix calculations.",
        "test_plan": [
          {
            "test_id": "V-001",
            "title": "Verify Correct Separability Matrix for Nested Compound Model (Original Bug)",
            "description": "This test recreates the original bug report's nested compound model and asserts that the separability matrix is now calculated correctly.",
            "setup": "Define the nested compound model `m.Pix2Sky_TAN() & cm` where `cm = m.Linear1D(10) & m.Linear1D(5)`.",
            "execution": "Calculate the separability matrix using `separability_matrix(m.Pix2Sky_TAN() & cm)`.",
            "expected_result": "The separability matrix should be a 4x4 array with the following structure:\n```\narray([[ True,  True, False, False],\n       [ True,  True, False, False],\n       [False, False,  True, False],\n       [False, False, False,  True]])\n```",
            "priority": "immediate"
          },
          {
            "test_id": "V-002",
            "title": "Verify Correct Separability Matrix for Non-Nested Compound Model",
            "description": "This test checks that the fix doesn't negatively impact the calculation of separability matrices for simple, non-nested compound models.",
            "setup": "Define the compound model `m.Linear1D(10) & m.Linear1D(5)`.",
            "execution": "Calculate the separability matrix using `separability_matrix(m.Linear1D(10) & m.Linear1D(5))`.",
            "expected_result": "The separability matrix should be a 2x2 array with the following structure:\n```\narray([[ True, False],\n       [False,  True]])\n```",
            "priority": "immediate"
          },
          {
            "test_id": "V-003",
            "title": "Verify Correct Separability Matrix for Complex Non-Nested Compound Model",
            "description": "This test checks that the fix doesn't negatively impact the calculation of separability matrices for complex, non-nested compound models (as in the original bug report).",
            "setup": "Define the compound model `m.Pix2Sky_TAN() & m.Linear1D(10) & m.Linear1D(5)`.",
            "execution": "Calculate the separability matrix using `separability_matrix(m.Pix2Sky_TAN() & m.Linear1D(10) & m.Linear1D(5))`.",
            "expected_result": "The separability matrix should be a 4x4 array with the following structure:\n```\narray([[ True,  True, False, False],\n       [ True,  True, False, False],\n       [False, False,  True, False],\n       [False, False, False,  True]])\n```",
            "priority": "soon"
          },
          {
            "test_id": "V-004",
            "title": "Verify Separability Matrix with Different Nested Structures",
            "description": "This test checks the separability matrix calculation for various levels of nesting of CompoundModels. This helps ensure that the fix generalizes to different nesting scenarios.",
            "setup": "Define models with different levels of nesting, e.g., `(m.Linear1D(10) & m.Linear1D(5)) & m.Gaussian1D(amplitude=1, mean=0, stddev=1)` and `m.Gaussian1D(amplitude=1, mean=0, stddev=1) & (m.Linear1D(10) & m.Linear1D(5))`.",
            "execution": "Calculate the separability matrix for each model.",
            "expected_result": "The separability matrix should reflect the separability of the inputs and outputs of the constituent models.  Specifically, inputs/outputs within a nested CompoundModel should *not* be reported as separable from each other, but inputs/outputs of separate CompoundModels should be separable.",
            "priority": "soon"
          },
          {
            "test_id": "V-005",
            "title": "Check Separability Matrix for Single Model",
            "description": "Checks that a single, non-compound model returns a trivial separability matrix.",
            "setup": "Define a simple model, e.g., `m.Gaussian1D(amplitude=1, mean=0, stddev=1)`.",
            "execution": "Calculate the separability matrix.",
            "expected_result": "The separability matrix should be a 1x1 array with a value of True.",
            "priority": "backlog"
          }
        ],
        "done_definition": "All tests pass, demonstrating that the fix correctly calculates separability matrices for nested CompoundModels without introducing regressions in other cases.",
        "test_execution": [],
        "unresolved_issues": []
      }
    }
  },
  "extra": {
    "evaluation_requested": true,
    "evaluation": {
      "enabled": true,
      "rubric": "bug_resolution_v1",
      "rubric_id": "bug_resolution_v1",
      "rubric_version": "1.0.0",
      "criteria": [
        {
          "criterion": "documentation",
          "raw_score": 93.0,
          "normalized_score": 0.93,
          "adjusted_normalized_score": 0.586,
          "score": 93.0,
          "weight": 0.1,
          "formula_id": "zero_one",
          "critical_floor": null,
          "floor_passed": true,
          "max_score": 100.0
        },
        {
          "criterion": "root_cause_accuracy",
          "raw_score": 100.0,
          "normalized_score": 1.0,
          "adjusted_normalized_score": 0.6,
          "score": 100.0,
          "weight": 0.35,
          "formula_id": "zero_one",
          "critical_floor": 0.7,
          "floor_passed": true,
          "max_score": 100.0
        },
        {
          "criterion": "fix_quality",
          "raw_score": 100.0,
          "normalized_score": 1.0,
          "adjusted_normalized_score": 0.6,
          "score": 100.0,
          "weight": 0.35,
          "formula_id": "zero_one",
          "critical_floor": 0.75,
          "floor_passed": true,
          "max_score": 100.0
        },
        {
          "criterion": "verification",
          "raw_score": 100.0,
          "normalized_score": 1.0,
          "adjusted_normalized_score": 0.6,
          "score": 100.0,
          "weight": 0.2,
          "formula_id": "zero_one",
          "critical_floor": null,
          "floor_passed": true,
          "max_score": 100.0
        }
      ],
      "overall_score": 98.25,
      "weighted_score": 97.54,
      "objective_weighted_score": 99.3,
      "grade": "A",
      "passed": true,
      "pass_threshold": 70.0,
      "step_scores": [
        {
          "step_name": "triage",
          "status": "success",
          "score": 100.0
        },
        {
          "step_name": "root_cause_analysis",
          "status": "success",
          "score": 100.0
        },
        {
          "step_name": "generate_fix",
          "status": "success",
          "score": 100.0
        },
        {
          "step_name": "regression_check",
          "status": "success",
          "score": 100.0
        },
        {
          "step_name": "generate_verification",
          "status": "success",
          "score": 100.0
        }
      ],
      "dataset": {
        "source": "local",
        "dataset_id": "agentic-workflows-v2/tests/fixtures/datasets/swe_bench_verified.json",
        "dataset_path": "agentic-workflows-v2/tests/fixtures/datasets/swe_bench_verified.json",
        "sample_index": 0,
        "task_id": "0",
        "dataset_workflow_compatible": true,
        "dataset_mismatch_reasons": []
      },
      "score_layers": {
        "layer1_objective": 99.3,
        "layer2_judge": null,
        "layer3_similarity": 99.3,
        "layer3_efficiency": 72.66,
        "layer3_advisory": 90.51
      },
      "hybrid_weights": {
        "objective": 0.6,
        "advisory": 0.15
      },
      "judge": null,
      "generated_at": "2026-02-16T11:53:12.601408+00:00",
      "hard_gates": {
        "required_outputs_present": true,
        "overall_status_success": true,
        "no_critical_step_failures": true,
        "schema_contract_valid": true,
        "dataset_workflow_compatible": true
      },
      "hard_gate_failures": [],
      "floor_violations": [],
      "grade_capped": false
    }
  }
}