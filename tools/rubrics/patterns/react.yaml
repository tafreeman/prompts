# ReAct Pattern Definition
# Reference: Yao et al. "ReAct: Synergizing Reasoning and Acting in Language Models"

id: react
name: ReAct
description: |
  Reasoning + Acting pattern that interleaves thought, action, and observation
  phases for tool-augmented reasoning tasks.

required_phases:
  - name: Thought
    required: true
    repeatable: true
    description: Internal reasoning about the current state and next steps
  - name: Action
    required: true
    repeatable: true
    description: Tool invocation or external action
  - name: Observation
    required: true
    repeatable: true
    description: Result from the action/tool
  - name: Final Answer
    required: true
    repeatable: false
    description: Concluding response after reasoning loop

ordering_constraints:
  type: strict_sequence
  sequence:
    - Thought
    - Action
    - Observation
  loop: true
  terminator: Final Answer
  rules:
    - Action must follow Thought
    - Observation must follow Action
    - Thought must follow Observation (if continuing)

phase_markers:
  Thought:
    - "^\\*{0,2}Thought\\*{0,2}\\s*[:\\d]*"
    - "^\\*{0,2}Thinking\\*{0,2}:"
    - "^\\*{0,2}Reasoning\\*{0,2}:"
    - "Thought:"
  Action:
    - "^\\*{0,2}Action\\*{0,2}\\s*[:\\d]*"
    - "^\\*{0,2}Tool\\*{0,2}:"
    - "^\\*{0,2}Execute\\*{0,2}:"
    - "Action:"
  Observation:
    - "^\\*{0,2}Observation\\*{0,2}\\s*[:\\d]*"
    - "^\\*{0,2}Result\\*{0,2}:"
    - "^\\*{0,2}Output\\*{0,2}:"
    - "Observation:"
  Final Answer:
    - "^\\*{0,2}Final Answer\\*{0,2}:"
    - "^\\*{0,2}Answer\\*{0,2}:"
    - "^\\*{0,2}Conclusion\\*{0,2}:"
    - "Final Answer:"

constraints:
  forbid:
    - Analysis or reasoning inside Action block
    - Tool invocation outside Action block
    - Skipping Observation after Action
    - Multiple Actions without intervening Observation
  require:
    - At least one complete Thought-Action-Observation cycle
    - Explicit phase markers
    - Final Answer after reasoning complete

pattern_specific_dimensions:
  thought_action_separation:
    description: Are actions purely tool-like with no embedded reasoning?
    scale: [0, 5]
  observation_binding:
    description: Are observations used in subsequent thoughts?
    scale: [0, 5]
  termination_discipline:
    description: Does it stop looping appropriately?
    scale: [0, 5]

minimum_cycles: 1
max_cycles: 10
